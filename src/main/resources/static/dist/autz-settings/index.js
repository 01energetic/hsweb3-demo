webpackJsonp([8,15],{0:function(module,exports,__webpack_require__){eval('window.BASE_PATH = __webpack_require__.p;\nwindow.API_BASE_PATH = getCookie("api_root", "/");\n\nwindow.mini_debugger = false;\n/**\n * 引入一个插件(js或者css)\n * @param path 插件路径\n * @param callback 加载完成回调,css不会执行回调\n */\nfunction importPlugin(path, callback) {\n    if (path.indexOf("http") != 0 || path.indexOf("//") != 0) {\n        path = window.BASE_PATH + path;\n    }\n    var head = document.getElementsByTagName(\'head\')[0];\n    if (path.indexOf("js") == path.length - 2) {\n        var script = document.createElement(\'script\');\n        script.type = \'text/javascript\';\n        script.charset = \'utf-8\';\n        script.timeout = 120000;\n        if (typeof callback != "undefined")\n            script.async = true;\n        script.src = path;\n        head.appendChild(script);\n        function onload() {\n            script.onerror = script.onload = undefined;\n            if (callback)callback();\n        }\n\n        script.onload = onload;\n        script.onerror = onload;\n\n    } else if (path.indexOf("css") == path.length - 3) {\n        var style = document.createElement(\'link\');\n        style.rel = "stylesheet";\n        style.href = path;\n        style.type = "text/css";\n        head.appendChild(style);\n    }\n}\n\n/**\n * 获取cooke\n * @param sName cookie名称\n * @param defaultVal 默认值\n * @returns {*} cookie值\n */\nfunction getCookie(sName, defaultVal) {\n    var aCookie = document.cookie.split("; ");\n    var lastMatch = null;\n    for (var i = 0; i < aCookie.length; i++) {\n        var aCrumb = aCookie[i].split("=");\n        if (sName == aCrumb[0]) {\n            lastMatch = aCrumb;\n        }\n    }\n    if (lastMatch) {\n        var v = lastMatch[1];\n        if (v === undefined) return v;\n        return unescape(v);\n    }\n    return defaultVal;\n}\nfunction loadMiniui(callback) {\n\n    var theme = getCookie("theme", window.miniui_theme ? window.miniui_theme : "pure");\n    var mode = getCookie("mode", "large");\n\n    function loadMini() {\n        importPlugin("plugins/miniui/themes/default/miniui.css");\n        importPlugin("plugins/miniui/themes/icons.css");\n        importPlugin(\'plugins/miniui/themes/\' + theme + \'/skin.css\');\n        importPlugin("plugins/miniui/themes/default/" + mode + "-mode.css");\n        importPlugin("plugins/miniui/miniui.js", callback);\n    }\n\n    if (!window.jQuery) {\n        importPlugin("plugins/jquery/jquery.min.js", loadMini);\n    } else {\n        loadMini();\n    }\n}\nfunction showTips(msg, state) {\n    mini.showTips({\n        content: msg,\n        state: state || \'success\',\n        x: \'center\',\n        y: \'top\',\n        timeout: 3000\n    });\n}\n/**\n * 打开窗口\n * @param url 窗口的URL\n * @param title 标题\n * @param width 宽度\n * @param height 高度\n * @param ondestroy 销毁时回调 , 打开的页面通过 boot.closeWindow(response) ;传递返回值. 通过回调参数获取.\n * @param onload 加载时毁掉 , 可通过 this.getIFrameEl(); 获取frame对象\n */\nfunction openWindow(url, title, width, height, ondestroy, onload) {\n    if (url.indexOf("http") != 0) {\n        if (url.indexOf("/") == 0)url = url.substr(1);\n        url = window.BASE_PATH + url;\n    }\n    mini.open({\n        url: url,\n        showMaxButton: true,\n        title: title,\n        width: width,\n        height: height,\n        maskOnLoad: false,\n        showModal: false,\n        onload: onload,\n        ondestroy: ondestroy\n    });\n}\n\nmodule.exports = {\n    /**\n     * 给表单绑定回车事件\n     * @param formEl 表单选择器,如:#search-box\n     * @param fun 回调\n     */\n    bindOnEnter: function (formEl, fun) {\n        var form = new mini.Form(formEl);\n        var fields = form.getFields();\n        for (var i = 0; i < fields.length; i++) {\n            var field = fields[i];\n            if (!field.onenter && field.on) {\n                field.on("enter", fun);\n            }\n        }\n    },\n    /**\n     * 查询表格\n     * @param formEL 查询条件表单选择器,如:#search-box\n     * @param grid 表格对象\n     */\n    searchGrid: function (formEL, grid) {\n        var param = new mini.Form(formEL).getData();\n        var request = __webpack_require__(1);\n        grid.load(request.encodeQueryParam(param));\n    },\n    /**\n     * 引入一个插件\n     */\n    importPlugin: importPlugin,\n    /**\n     * 引入miniui\n     */\n    loadMiniui: loadMiniui,\n    /**\n     * 打开窗口\n     */\n    openWindow: openWindow,\n    /**\n     * 显示消息提示\n     */\n    showTips: showTips,\n    /**\n     * 关闭窗口并返回数据\n     * @param data\n     * @returns {*}\n     */\n    closeWindow: function (data) {\n        if (window.CloseOwnerWindow) return window.CloseOwnerWindow(data);\n        else window.close();\n    },\n    showFormErrors: function (formEl, result) {\n        var errorMessage;\n        if (typeof result == \'string\') {\n            errorMessage = mini.decode(result);\n        } else {\n            errorMessage = result;\n        }\n        if (errorMessage) {\n            $(errorMessage).each(function () {\n                var field = mini.getbyName(this.field);\n                if (field) {\n                    field.setIsValid(false);\n                    field.setErrorText(this.message);\n                    field.focus();\n                }\n            });\n        }\n    },\n    /**\n     * 初始化表格对象,修改其默认配置,以适配后台api\n     * @param grid 表格对象\n     */\n    initGrid: function (grid) {\n        grid.setSortFieldField("sorts[0].name");\n        grid.setSortOrderField("sorts[0].dir");\n        //后台响应数据格式\n        grid.setDataField("result.data");\n        grid.setTotalField("result.total");\n        grid.allowAlternating = true;\n        //查询全部为GET\n        grid.setAjaxOptions({\n            type: "GET",\n            dataType: "json"\n        });\n        grid.un("loaderror",\n            function (e) {\n            });\n        // 解决弹出选择控件的bug\n        grid.on("cellbeginedit", function (e) {\n            if (e.editor && e.editor.type == "buttonedit") {\n                e.editor.setValue(e.value);\n                e.editor.setText(e.value);\n            }\n        });\n        //加载失败进行提示\n        grid.on("loaderror",\n            function (e) {\n                try {\n                    var res = mini.decode(e.xhr.responseText);\n                    if (res.status == 401) {\n                        if (window.doLogin) {\n                            window.doLogin(function () {\n                                grid.reload()\n                            });\n                        }\n                        else if (window.top.doLogin) {\n                            window.top.doLogin(function () {\n                                grid.reload()\n                            });\n                        }\n                        else {\n                            showTips("请登录", "danger");\n                        }\n\n                    } else if (res.status == 403) {\n                        showTips("权限不够", "danger");\n                    } else if (res.status == 500) {\n                        showTips("数据加载失败:" + res.message, "danger");\n                        if (window.console) {\n                            window.console.log(res.message);\n                        }\n                    } else {\n                        showTips("数据加载失败:" + res.message, "danger");\n                    }\n                } catch (e) {\n                    showTips("加载失败...");\n                }\n            });\n\n        var tip = new mini.ToolTip();\n        tip.set({\n            target: document,\n            selector: \'.action-button\'\n        });\n    },\n    createActionButton: function (title, icon, onclick) {\n        if (!window.action_countter)window.action_countter = 0;\n        var callId = "action_" + (++window.action_countter);\n        window[callId] = onclick;\n        return ["<span", " onclick=\'", callId, "()\'", " title=\'", title, "\'", " class=\'action-button ", icon, "\'", "></span>"].join("");\n    },\n    /**\n     * 显示加载中提示\n     * @param message 提示的消息\n     * @returns {{close: hide,hide:hide}} 关闭显示的回调,调用close和hide都可以\n     */\n    loading: function (message) {\n        mini.mask({\n            el: document.body,\n            cls: \'mini-mask-loading\',\n            html: message\n        });\n        function hide() {\n            mini.unmask(document.body);\n        }\n\n        return {\n            close: hide,\n            hide: hide\n        };\n    },\n    getCookie: getCookie,\n    getFormData: function (formEl, validate) {\n        var form = new mini.Form(formEl);\n        form.validate();\n        if (validate && form.isValid() == false) {\n            return;\n        }\n        return form.getData();\n    }\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm9vdC5qcz9lN2UzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxFQUFFO0FBQ2Y7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBLG1CQUFtQixvQkFBb0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFO0FBQ2hFLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsbUJBQW1CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCO0FBQ3JCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVCQUF1QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cuQkFTRV9QQVRIID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX187XG53aW5kb3cuQVBJX0JBU0VfUEFUSCA9IGdldENvb2tpZShcImFwaV9yb290XCIsIFwiL1wiKTtcblxud2luZG93Lm1pbmlfZGVidWdnZXIgPSBmYWxzZTtcbi8qKlxuICog5byV5YWl5LiA5Liq5o+S5Lu2KGpz5oiW6ICFY3NzKVxuICogQHBhcmFtIHBhdGgg5o+S5Lu26Lev5b6EXG4gKiBAcGFyYW0gY2FsbGJhY2sg5Yqg6L295a6M5oiQ5Zue6LCDLGNzc+S4jeS8muaJp+ihjOWbnuiwg1xuICovXG5mdW5jdGlvbiBpbXBvcnRQbHVnaW4ocGF0aCwgY2FsbGJhY2spIHtcbiAgICBpZiAocGF0aC5pbmRleE9mKFwiaHR0cFwiKSAhPSAwIHx8IHBhdGguaW5kZXhPZihcIi8vXCIpICE9IDApIHtcbiAgICAgICAgcGF0aCA9IHdpbmRvdy5CQVNFX1BBVEggKyBwYXRoO1xuICAgIH1cbiAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gICAgaWYgKHBhdGguaW5kZXhPZihcImpzXCIpID09IHBhdGgubGVuZ3RoIC0gMikge1xuICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gICAgICAgIHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04JztcbiAgICAgICAgc2NyaXB0LnRpbWVvdXQgPSAxMjAwMDA7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gICAgICAgIHNjcmlwdC5zcmMgPSBwYXRoO1xuICAgICAgICBoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIGZ1bmN0aW9uIG9ubG9hZCgpIHtcbiAgICAgICAgICAgIHNjcmlwdC5vbmVycm9yID0gc2NyaXB0Lm9ubG9hZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayljYWxsYmFjaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IG9ubG9hZDtcbiAgICAgICAgc2NyaXB0Lm9uZXJyb3IgPSBvbmxvYWQ7XG5cbiAgICB9IGVsc2UgaWYgKHBhdGguaW5kZXhPZihcImNzc1wiKSA9PSBwYXRoLmxlbmd0aCAtIDMpIHtcbiAgICAgICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICBzdHlsZS5yZWwgPSBcInN0eWxlc2hlZXRcIjtcbiAgICAgICAgc3R5bGUuaHJlZiA9IHBhdGg7XG4gICAgICAgIHN0eWxlLnR5cGUgPSBcInRleHQvY3NzXCI7XG4gICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiDojrflj5Zjb29rZVxuICogQHBhcmFtIHNOYW1lIGNvb2tpZeWQjeensFxuICogQHBhcmFtIGRlZmF1bHRWYWwg6buY6K6k5YC8XG4gKiBAcmV0dXJucyB7Kn0gY29va2ll5YC8XG4gKi9cbmZ1bmN0aW9uIGdldENvb2tpZShzTmFtZSwgZGVmYXVsdFZhbCkge1xuICAgIHZhciBhQ29va2llID0gZG9jdW1lbnQuY29va2llLnNwbGl0KFwiOyBcIik7XG4gICAgdmFyIGxhc3RNYXRjaCA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhQ29va2llLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBhQ3J1bWIgPSBhQ29va2llW2ldLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgaWYgKHNOYW1lID09IGFDcnVtYlswXSkge1xuICAgICAgICAgICAgbGFzdE1hdGNoID0gYUNydW1iO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChsYXN0TWF0Y2gpIHtcbiAgICAgICAgdmFyIHYgPSBsYXN0TWF0Y2hbMV07XG4gICAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHJldHVybiB2O1xuICAgICAgICByZXR1cm4gdW5lc2NhcGUodik7XG4gICAgfVxuICAgIHJldHVybiBkZWZhdWx0VmFsO1xufVxuZnVuY3Rpb24gbG9hZE1pbml1aShjYWxsYmFjaykge1xuXG4gICAgdmFyIHRoZW1lID0gZ2V0Q29va2llKFwidGhlbWVcIiwgd2luZG93Lm1pbml1aV90aGVtZSA/IHdpbmRvdy5taW5pdWlfdGhlbWUgOiBcInB1cmVcIik7XG4gICAgdmFyIG1vZGUgPSBnZXRDb29raWUoXCJtb2RlXCIsIFwibGFyZ2VcIik7XG5cbiAgICBmdW5jdGlvbiBsb2FkTWluaSgpIHtcbiAgICAgICAgaW1wb3J0UGx1Z2luKFwicGx1Z2lucy9taW5pdWkvdGhlbWVzL2RlZmF1bHQvbWluaXVpLmNzc1wiKTtcbiAgICAgICAgaW1wb3J0UGx1Z2luKFwicGx1Z2lucy9taW5pdWkvdGhlbWVzL2ljb25zLmNzc1wiKTtcbiAgICAgICAgaW1wb3J0UGx1Z2luKCdwbHVnaW5zL21pbml1aS90aGVtZXMvJyArIHRoZW1lICsgJy9za2luLmNzcycpO1xuICAgICAgICBpbXBvcnRQbHVnaW4oXCJwbHVnaW5zL21pbml1aS90aGVtZXMvZGVmYXVsdC9cIiArIG1vZGUgKyBcIi1tb2RlLmNzc1wiKTtcbiAgICAgICAgaW1wb3J0UGx1Z2luKFwicGx1Z2lucy9taW5pdWkvbWluaXVpLmpzXCIsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBpZiAoIXdpbmRvdy5qUXVlcnkpIHtcbiAgICAgICAgaW1wb3J0UGx1Z2luKFwicGx1Z2lucy9qcXVlcnkvanF1ZXJ5Lm1pbi5qc1wiLCBsb2FkTWluaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbG9hZE1pbmkoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzaG93VGlwcyhtc2csIHN0YXRlKSB7XG4gICAgbWluaS5zaG93VGlwcyh7XG4gICAgICAgIGNvbnRlbnQ6IG1zZyxcbiAgICAgICAgc3RhdGU6IHN0YXRlIHx8ICdzdWNjZXNzJyxcbiAgICAgICAgeDogJ2NlbnRlcicsXG4gICAgICAgIHk6ICd0b3AnLFxuICAgICAgICB0aW1lb3V0OiAzMDAwXG4gICAgfSk7XG59XG4vKipcbiAqIOaJk+W8gOeql+WPo1xuICogQHBhcmFtIHVybCDnqpflj6PnmoRVUkxcbiAqIEBwYXJhbSB0aXRsZSDmoIfpophcbiAqIEBwYXJhbSB3aWR0aCDlrr3luqZcbiAqIEBwYXJhbSBoZWlnaHQg6auY5bqmXG4gKiBAcGFyYW0gb25kZXN0cm95IOmUgOavgeaXtuWbnuiwgyAsIOaJk+W8gOeahOmhtemdoumAmui/hyBib290LmNsb3NlV2luZG93KHJlc3BvbnNlKSA75Lyg6YCS6L+U5Zue5YC8LiDpgJrov4flm57osIPlj4LmlbDojrflj5YuXG4gKiBAcGFyYW0gb25sb2FkIOWKoOi9veaXtuavgeaOiSAsIOWPr+mAmui/hyB0aGlzLmdldElGcmFtZUVsKCk7IOiOt+WPlmZyYW1l5a+56LGhXG4gKi9cbmZ1bmN0aW9uIG9wZW5XaW5kb3codXJsLCB0aXRsZSwgd2lkdGgsIGhlaWdodCwgb25kZXN0cm95LCBvbmxvYWQpIHtcbiAgICBpZiAodXJsLmluZGV4T2YoXCJodHRwXCIpICE9IDApIHtcbiAgICAgICAgaWYgKHVybC5pbmRleE9mKFwiL1wiKSA9PSAwKXVybCA9IHVybC5zdWJzdHIoMSk7XG4gICAgICAgIHVybCA9IHdpbmRvdy5CQVNFX1BBVEggKyB1cmw7XG4gICAgfVxuICAgIG1pbmkub3Blbih7XG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICBzaG93TWF4QnV0dG9uOiB0cnVlLFxuICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgIG1hc2tPbkxvYWQ6IGZhbHNlLFxuICAgICAgICBzaG93TW9kYWw6IGZhbHNlLFxuICAgICAgICBvbmxvYWQ6IG9ubG9hZCxcbiAgICAgICAgb25kZXN0cm95OiBvbmRlc3Ryb3lcbiAgICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgLyoqXG4gICAgICog57uZ6KGo5Y2V57uR5a6a5Zue6L2m5LqL5Lu2XG4gICAgICogQHBhcmFtIGZvcm1FbCDooajljZXpgInmi6nlmags5aaCOiNzZWFyY2gtYm94XG4gICAgICogQHBhcmFtIGZ1biDlm57osINcbiAgICAgKi9cbiAgICBiaW5kT25FbnRlcjogZnVuY3Rpb24gKGZvcm1FbCwgZnVuKSB7XG4gICAgICAgIHZhciBmb3JtID0gbmV3IG1pbmkuRm9ybShmb3JtRWwpO1xuICAgICAgICB2YXIgZmllbGRzID0gZm9ybS5nZXRGaWVsZHMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBmaWVsZCA9IGZpZWxkc1tpXTtcbiAgICAgICAgICAgIGlmICghZmllbGQub25lbnRlciAmJiBmaWVsZC5vbikge1xuICAgICAgICAgICAgICAgIGZpZWxkLm9uKFwiZW50ZXJcIiwgZnVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICog5p+l6K+i6KGo5qC8XG4gICAgICogQHBhcmFtIGZvcm1FTCDmn6Xor6LmnaHku7booajljZXpgInmi6nlmags5aaCOiNzZWFyY2gtYm94XG4gICAgICogQHBhcmFtIGdyaWQg6KGo5qC85a+56LGhXG4gICAgICovXG4gICAgc2VhcmNoR3JpZDogZnVuY3Rpb24gKGZvcm1FTCwgZ3JpZCkge1xuICAgICAgICB2YXIgcGFyYW0gPSBuZXcgbWluaS5Gb3JtKGZvcm1FTCkuZ2V0RGF0YSgpO1xuICAgICAgICB2YXIgcmVxdWVzdCA9IHJlcXVpcmUoXCJyZXF1ZXN0XCIpO1xuICAgICAgICBncmlkLmxvYWQocmVxdWVzdC5lbmNvZGVRdWVyeVBhcmFtKHBhcmFtKSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDlvJXlhaXkuIDkuKrmj5Lku7ZcbiAgICAgKi9cbiAgICBpbXBvcnRQbHVnaW46IGltcG9ydFBsdWdpbixcbiAgICAvKipcbiAgICAgKiDlvJXlhaVtaW5pdWlcbiAgICAgKi9cbiAgICBsb2FkTWluaXVpOiBsb2FkTWluaXVpLFxuICAgIC8qKlxuICAgICAqIOaJk+W8gOeql+WPo1xuICAgICAqL1xuICAgIG9wZW5XaW5kb3c6IG9wZW5XaW5kb3csXG4gICAgLyoqXG4gICAgICog5pi+56S65raI5oGv5o+Q56S6XG4gICAgICovXG4gICAgc2hvd1RpcHM6IHNob3dUaXBzLFxuICAgIC8qKlxuICAgICAqIOWFs+mXreeql+WPo+W5tui/lOWbnuaVsOaNrlxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICogQHJldHVybnMgeyp9XG4gICAgICovXG4gICAgY2xvc2VXaW5kb3c6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmICh3aW5kb3cuQ2xvc2VPd25lcldpbmRvdykgcmV0dXJuIHdpbmRvdy5DbG9zZU93bmVyV2luZG93KGRhdGEpO1xuICAgICAgICBlbHNlIHdpbmRvdy5jbG9zZSgpO1xuICAgIH0sXG4gICAgc2hvd0Zvcm1FcnJvcnM6IGZ1bmN0aW9uIChmb3JtRWwsIHJlc3VsdCkge1xuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlO1xuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gbWluaS5kZWNvZGUocmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAkKGVycm9yTWVzc2FnZSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gbWluaS5nZXRieU5hbWUodGhpcy5maWVsZCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLnNldElzVmFsaWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZC5zZXRFcnJvclRleHQodGhpcy5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICog5Yid5aeL5YyW6KGo5qC85a+56LGhLOS/ruaUueWFtum7mOiupOmFjee9rizku6XpgILphY3lkI7lj7BhcGlcbiAgICAgKiBAcGFyYW0gZ3JpZCDooajmoLzlr7nosaFcbiAgICAgKi9cbiAgICBpbml0R3JpZDogZnVuY3Rpb24gKGdyaWQpIHtcbiAgICAgICAgZ3JpZC5zZXRTb3J0RmllbGRGaWVsZChcInNvcnRzWzBdLm5hbWVcIik7XG4gICAgICAgIGdyaWQuc2V0U29ydE9yZGVyRmllbGQoXCJzb3J0c1swXS5kaXJcIik7XG4gICAgICAgIC8v5ZCO5Y+w5ZON5bqU5pWw5o2u5qC85byPXG4gICAgICAgIGdyaWQuc2V0RGF0YUZpZWxkKFwicmVzdWx0LmRhdGFcIik7XG4gICAgICAgIGdyaWQuc2V0VG90YWxGaWVsZChcInJlc3VsdC50b3RhbFwiKTtcbiAgICAgICAgZ3JpZC5hbGxvd0FsdGVybmF0aW5nID0gdHJ1ZTtcbiAgICAgICAgLy/mn6Xor6Llhajpg6jkuLpHRVRcbiAgICAgICAgZ3JpZC5zZXRBamF4T3B0aW9ucyh7XG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiXG4gICAgICAgIH0pO1xuICAgICAgICBncmlkLnVuKFwibG9hZGVycm9yXCIsXG4gICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vIOino+WGs+W8ueWHuumAieaLqeaOp+S7tueahGJ1Z1xuICAgICAgICBncmlkLm9uKFwiY2VsbGJlZ2luZWRpdFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUuZWRpdG9yICYmIGUuZWRpdG9yLnR5cGUgPT0gXCJidXR0b25lZGl0XCIpIHtcbiAgICAgICAgICAgICAgICBlLmVkaXRvci5zZXRWYWx1ZShlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBlLmVkaXRvci5zZXRUZXh0KGUudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy/liqDovb3lpLHotKXov5vooYzmj5DnpLpcbiAgICAgICAgZ3JpZC5vbihcImxvYWRlcnJvclwiLFxuICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gbWluaS5kZWNvZGUoZS54aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmRvTG9naW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZG9Mb2dpbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQucmVsb2FkKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdpbmRvdy50b3AuZG9Mb2dpbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy50b3AuZG9Mb2dpbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQucmVsb2FkKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dUaXBzKFwi6K+355m75b2VXCIsIFwiZGFuZ2VyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLnN0YXR1cyA9PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dUaXBzKFwi5p2D6ZmQ5LiN5aSfXCIsIFwiZGFuZ2VyXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5zdGF0dXMgPT0gNTAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93VGlwcyhcIuaVsOaNruWKoOi9veWksei0pTpcIiArIHJlcy5tZXNzYWdlLCBcImRhbmdlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuY29uc29sZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhyZXMubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93VGlwcyhcIuaVsOaNruWKoOi9veWksei0pTpcIiArIHJlcy5tZXNzYWdlLCBcImRhbmdlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd1RpcHMoXCLliqDovb3lpLHotKUuLi5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHRpcCA9IG5ldyBtaW5pLlRvb2xUaXAoKTtcbiAgICAgICAgdGlwLnNldCh7XG4gICAgICAgICAgICB0YXJnZXQ6IGRvY3VtZW50LFxuICAgICAgICAgICAgc2VsZWN0b3I6ICcuYWN0aW9uLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBjcmVhdGVBY3Rpb25CdXR0b246IGZ1bmN0aW9uICh0aXRsZSwgaWNvbiwgb25jbGljaykge1xuICAgICAgICBpZiAoIXdpbmRvdy5hY3Rpb25fY291bnR0ZXIpd2luZG93LmFjdGlvbl9jb3VudHRlciA9IDA7XG4gICAgICAgIHZhciBjYWxsSWQgPSBcImFjdGlvbl9cIiArICgrK3dpbmRvdy5hY3Rpb25fY291bnR0ZXIpO1xuICAgICAgICB3aW5kb3dbY2FsbElkXSA9IG9uY2xpY2s7XG4gICAgICAgIHJldHVybiBbXCI8c3BhblwiLCBcIiBvbmNsaWNrPSdcIiwgY2FsbElkLCBcIigpJ1wiLCBcIiB0aXRsZT0nXCIsIHRpdGxlLCBcIidcIiwgXCIgY2xhc3M9J2FjdGlvbi1idXR0b24gXCIsIGljb24sIFwiJ1wiLCBcIj48L3NwYW4+XCJdLmpvaW4oXCJcIik7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDmmL7npLrliqDovb3kuK3mj5DnpLpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSDmj5DnpLrnmoTmtojmga9cbiAgICAgKiBAcmV0dXJucyB7e2Nsb3NlOiBoaWRlLGhpZGU6aGlkZX19IOWFs+mXreaYvuekuueahOWbnuiwgyzosIPnlKhjbG9zZeWSjGhpZGXpg73lj6/ku6VcbiAgICAgKi9cbiAgICBsb2FkaW5nOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICBtaW5pLm1hc2soe1xuICAgICAgICAgICAgZWw6IGRvY3VtZW50LmJvZHksXG4gICAgICAgICAgICBjbHM6ICdtaW5pLW1hc2stbG9hZGluZycsXG4gICAgICAgICAgICBodG1sOiBtZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBoaWRlKCkge1xuICAgICAgICAgICAgbWluaS51bm1hc2soZG9jdW1lbnQuYm9keSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xvc2U6IGhpZGUsXG4gICAgICAgICAgICBoaWRlOiBoaWRlXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBnZXRDb29raWU6IGdldENvb2tpZSxcbiAgICBnZXRGb3JtRGF0YTogZnVuY3Rpb24gKGZvcm1FbCwgdmFsaWRhdGUpIHtcbiAgICAgICAgdmFyIGZvcm0gPSBuZXcgbWluaS5Gb3JtKGZvcm1FbCk7XG4gICAgICAgIGZvcm0udmFsaWRhdGUoKTtcbiAgICAgICAgaWYgKHZhbGlkYXRlICYmIGZvcm0uaXNWYWxpZCgpID09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcm0uZ2V0RGF0YSgpO1xuICAgIH1cbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ib290LmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIDIgMyA0IDUgNiA3IDggOSAxMCAxMSAxMiAxMyAxNCAxNSJdLCJzb3VyY2VSb290IjoiIn0=')},14:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('Object.defineProperty(__webpack_exports__, "__esModule", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_boot__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_boot___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_boot__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_request__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_request___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_request__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_common_common_css__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_common_common_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_common_common_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__index_css__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__index_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__index_css__);\n\n\n\n\n\n\nvar menuList = [];\nvar menuMap = {};\n\nvar permissionList = [];\n\nvar permissionMap = {};\nwindow.actions = [\n    {"id": "query", "text": "查询"},\n    {"id": "update", "text": "修改"},\n    {"id": "delete", "text": "删除"}\n];\nwindow.renderSettingMenuAction = function (e) {\n    return __WEBPACK_IMPORTED_MODULE_0_boot___default.a.createActionButton("删除菜单", "icon-remove", function () {\n        mini.get("menu-setting-grid").removeNode(e.record);\n    });\n}\n\nwindow.renderMenuAction = function (e) {\n    var html = [];\n    var row = e.record;\n\n    html.push(__WEBPACK_IMPORTED_MODULE_0_boot___default.a.createActionButton("添加到用户菜单", "icon-arrow-left", function () {\n        var settingGrid = mini.get("menu-setting-grid");\n\n        function createNode(menu) {\n            var node = {\n                menuId: menu.id,\n                icon: menu.icon,\n                menu: mini.clone(menu)\n            };\n            var children = [];\n            if (menu.children) {\n                $(menu.children).each(function () {\n                    children.push(createNode(this));\n                });\n            }\n            node.children = children;\n            return node;\n        }\n\n        var node = createNode(row);\n        settingGrid.addNode(node);\n        settingGrid.expandNode(node);\n    }));\n\n    return html.join("");\n}\nfunction initPermissionData(details) {\n    if (details) {\n        var list = [];\n        $(details).each(function () {\n            var permission = permissionMap[this.permissionId];\n            var optionalFields = permission.optionalFields;\n            var actions = [];\n            var detail = mini.clone(this);\n\n            permission.actionMap = {};\n            $(permission.actions).each(function () {\n                permission.actionMap[this.action] = this;\n            });\n            detail.dataAccessesMap = {};\n            $(detail.dataAccesses).each(function () {\n                detail.dataAccessesMap[this.action + this.type] = this;\n            });\n            function isChecked(action, field) {\n                if (detail.actions.indexOf(action) == -1)return false;\n                if (field) {\n                    var dataAccess = detail.dataAccessesMap[action + "DENY_FIELDS"];\n                    if (dataAccess) {\n                        return !(mini.decode(dataAccess.config).fields.indexOf(field) > -1);\n                    } else {\n                        return true;\n                    }\n                }\n                return true;\n            }\n\n            $(permission.actions).each(function () {\n                var action = this;\n                var fields = [];\n                var dataAccesses = [];\n                if (detail.dataAccesses) {\n                    $(detail.dataAccesses).each(function () {\n                        if (this.type == "DENY_FIELDS")return;\n                        if (this.action == action.action)\n                            dataAccesses.push(this);\n                    });\n                }\n                $(optionalFields).each(function () {\n                    var fieldChecked = isChecked(action.action, this.name);\n                    fields.push({\n                        type: "fields"\n                        , checked: fieldChecked\n                        , field: this.name\n                        , text: this.describe ? this.describe : this.name\n                    });\n                });\n                var actionData = {\n                    type: "action",\n                    action: this.action,\n                    text: this.describe ? this.describe : this.action,\n                    children: mini.clone(fields),\n                    dataAccesses: dataAccesses\n                };\n                if (fields.length == 0 && detail.actions.indexOf(this.action) != -1) {\n                    actionData.checked = true;\n                }\n                actions.push(actionData);\n            });\n            list.push({permission: this, permissionId: permission.id, text: this.name, children: actions});\n        });\n        console.log(list);\n        mini.get("permission-setting-grid").loadData(list);\n    }\n}\nfunction getSelectMenuPermission() {\n    var selectMenus = mini.get("menu-setting-grid").getList();\n    var permissions = [];\n    $(selectMenus).each(function () {\n        var permission;\n        var menuPer = this.menu.permissionId;\n        if (menuPer)menuPer = menuPer.split(",");\n        if (this.menu) {\n            $(menuPer).each(function () {\n                if (permission = permissionMap[this])\n                    permissions.push(permission);\n            });\n        }\n    });\n    return mini.clone(permissions);\n}\nfunction getPermissionData() {\n    var data = mini.get("permission-setting-grid").getData();\n    var list = [];\n    $(data).each(function () {\n        var actions = [];\n        var dataAccesses = {};\n        $(this.children).each(function () {\n            var action = this;\n            if (action.dataAccesses) {\n                $(action.dataAccesses).each(function () {\n                    dataAccesses[this.action + this.type] = this;\n                });\n            }\n            if (action.children) {\n                var denyField = [];\n                $(action.children).each(function () {\n                    if (!this.checked)\n                        denyField.push(this.field);\n                });\n                if (denyField.length == action.children.length && !action.checked) {\n                    return;\n                }\n                //没有全部进行勾选,则进行deny操作\n                if (denyField.length > 0) {\n                    var fieldDataAccess = {\n                        action: action.action,\n                        type: "DENY_FIELDS",\n                        describe: "不能操作字段",\n                        config: mini.encode({fields: denyField})\n                    };\n                    dataAccesses[fieldDataAccess.action + fieldDataAccess.type] = fieldDataAccess;\n                }\n            }\n            actions.push(action.action);\n        });\n        //设置\n        if (this.dataAccesses) {\n            $(this.dataAccesses).each(function () {\n                var dataAccess = this;\n                $(actions).each(function () {\n                    if (!dataAccesses[this.action + dataAccess.type]) {\n                        dataAccesses[this.action + dataAccess.type] = dataAccess;\n                    }\n                })\n            })\n        }\n        var tmp = [];\n        for (var action in dataAccesses) {\n            tmp.push(dataAccesses[action]);\n        }\n        //create data access\n        list.push({permissionId: this.permissionId, actions: actions, dataAccesses: tmp});\n    });\n    return list;\n}\nfunction initPermissionTabActive() {\n    var tab = mini.get("tabs");\n    tab.on("beforeactivechanged", function (e) {\n        var tab = e.tab;\n        if (tab.name == "permissionSetting") {\n            var menuPermissions = getSelectMenuPermission();\n            var list = [];\n            var tmp = [];\n            var old = getPermissionData();\n            var dataMap = {};\n            $(old).each(function () {\n                dataMap[this.permissionId] = this;\n                var dataAccessesMap = this.dataAccessesMap = {};\n                $(this.dataAccesses).each(function () {\n                    dataAccessesMap[this.action + this.type] = this;\n                });\n            });\n            function isChecked(permission, action, field) {\n                if (old.length == 0)return true;\n                var oldPer = dataMap[permission];\n                if (!oldPer)return true;\n                if (field) {\n                    if (!(oldPer.actions.indexOf(action) > -1))return false;\n                    var dataAccess = oldPer.dataAccessesMap[action + "DENY_FIELDS"];\n                    if (dataAccess) {\n                        return !(mini.decode(dataAccess.config).fields.indexOf(field) > -1);\n                    } else {\n                        return true;\n                    }\n                }\n                return false;\n            }\n\n            $(menuPermissions).each(function () {\n                if (tmp.indexOf(this.id) != -1)return;\n                var actions = [];\n                var permission = this;\n                var optionalFields = this.optionalFields;\n                var oldPer = dataMap[permission.id];\n\n                $(this.actions).each(function () {\n                    var action = this;\n                    var fields = [];\n                    var dataAccesses = [];\n                    if (oldPer && oldPer.dataAccesses) {\n                        $(oldPer.dataAccesses).each(function () {\n                            if (this.type == "DENY_FIELDS")return;\n                            if (this.action == action.action)\n                                dataAccesses.push(this);\n                        });\n                    }\n                    $(optionalFields).each(function () {\n                        var fieldChecked = isChecked(permission.id, action.action, this.name);\n                        fields.push({\n                            type: "fields"\n                            , checked: fieldChecked\n                            , field: this.name\n                            , text: this.describe ? this.describe : this.name\n                        });\n                    });\n                    var actionData = {\n                        type: "action",\n                        action: this.action,\n                        text: this.describe ? this.describe : this.action,\n                        children: mini.clone(fields),\n                        dataAccesses: dataAccesses\n                    };\n                    if (fields.length == 0 && oldPer && oldPer.actions.indexOf(this.action) != -1) {\n                        actionData.checked = true;\n                    }\n                    actions.push(actionData);\n                });\n                list.push({permission: this, permissionId: this.id, text: this.name, children: actions});\n                tmp.push(this.id);\n            });\n            mini.get("permission-setting-grid").loadData(list);\n        }\n    });\n}\nfunction initOrgSetting() {\n    var org_id = __WEBPACK_IMPORTED_MODULE_1_request___default.a.getParameter("org_id");\n    if (!org_id) {\n        $(".org-setting").hide();\n    }\n\n}\nfunction initData(type, settingFor) {\n    function initSetting() {\n        if (settingFor) {\n            __WEBPACK_IMPORTED_MODULE_1_request___default.a.get("autz-setting/" + type + "/" + settingFor, function (response) {\n                if (response.status == 200) {\n                    if (!response.result) {\n                        return;\n                    }\n                    var settingGrid = mini.get("menu-setting-grid");\n                    var setting = response.result;\n                    var menus = setting.menus;\n                    $(menus).each(function () {\n                        var menu = menuMap[this.menuId];\n                        this.menu = menu;\n                        if (menu)this.icon = menu.icon;\n                    });\n                    settingGrid.loadList(menus);\n                    var details = setting.details;\n                    initPermissionData(details);\n                } else {\n                    __WEBPACK_IMPORTED_MODULE_0_boot___default.a.showTips("获取数据失败:" + response.message, "danger");\n                }\n            });\n        }\n    }\n\n    __WEBPACK_IMPORTED_MODULE_1_request___default.a.get("menu?paging=false", function (response) {\n        if (response.status == 200) {\n            menuList = response.result.data;\n            $(menuList).each(function () {\n                menuMap[this.id] = this;\n            });\n            mini.get("menu-grid").loadList(menuList);\n            __WEBPACK_IMPORTED_MODULE_1_request___default.a.get("permission?paging=false", function (response) {\n                if (response.status == 200) {\n                    permissionList = response.result.data;\n                    $(permissionList).each(function () {\n                        permissionMap[this.id] = this;\n                    });\n                    initSetting();\n                } else {\n                    __WEBPACK_IMPORTED_MODULE_0_boot___default.a.showTips("加载权限失败:" + response.message, "danger");\n                }\n            })\n        } else {\n            __WEBPACK_IMPORTED_MODULE_0_boot___default.a.showTips("加载菜单失败:" + response.message, "danger");\n        }\n    });\n\n}\n\nfunction getData(type, settingFor) {\n    var data = {type: type, settingFor: settingFor};\n    data.menus = mini.get("menu-setting-grid").getData();\n    var details = getPermissionData();\n    data.details = details;\n    return data;\n}\n\nfunction initGrid() {\n\n}\n__WEBPACK_IMPORTED_MODULE_0_boot___default.a.loadMiniui(function () {\n    mini.parse();\n    var type = __WEBPACK_IMPORTED_MODULE_1_request___default.a.getParameter("type");\n    var settingFor = __WEBPACK_IMPORTED_MODULE_1_request___default.a.getParameter("settingFor");\n    if (!type || !settingFor) {\n        __WEBPACK_IMPORTED_MODULE_0_boot___default.a.showTips("参数错误!", "danger");\n        return;\n    }\n    initGrid();\n    initData(type, settingFor);\n    initPermissionTabActive();\n    initOrgSetting();\n    $(".save-button").on("click", function () {\n        var loading = __WEBPACK_IMPORTED_MODULE_0_boot___default.a.loading("提交中...");\n        var data = getData(type, settingFor);\n        __WEBPACK_IMPORTED_MODULE_1_request___default.a.patch("autz-setting", data, function (response) {\n            loading.hide();\n            if (response.status == 200) {\n                __WEBPACK_IMPORTED_MODULE_0_boot___default.a.showTips("保存成功");\n            } else {\n                __WEBPACK_IMPORTED_MODULE_0_boot___default.a.showTips("保存失败:" + response.message, "danger");\n            }\n        });\n    });\n\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYXV0ei1zZXR0aW5ncy9pbmRleC5qcz8xMjgwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxLQUFLLDRCQUE0QjtBQUNqQyxLQUFLLDZCQUE2QjtBQUNsQyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLHVCQUF1QixrRkFBa0Y7QUFDekcsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGtCQUFrQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixxRUFBcUU7QUFDeEYsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQiwyQkFBMkIsNEVBQTRFO0FBQ3ZHO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSzs7QUFFTCxDQUFDIiwiZmlsZSI6IjE0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJvb3QgZnJvbSBcImJvb3RcIjtcbmltcG9ydCByZXF1ZXN0IGZyb20gXCJyZXF1ZXN0XCI7XG5cbmltcG9ydCBcImNvbW1vbi9jb21tb24uY3NzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG52YXIgbWVudUxpc3QgPSBbXTtcbnZhciBtZW51TWFwID0ge307XG5cbnZhciBwZXJtaXNzaW9uTGlzdCA9IFtdO1xuXG52YXIgcGVybWlzc2lvbk1hcCA9IHt9O1xud2luZG93LmFjdGlvbnMgPSBbXG4gICAge1wiaWRcIjogXCJxdWVyeVwiLCBcInRleHRcIjogXCLmn6Xor6JcIn0sXG4gICAge1wiaWRcIjogXCJ1cGRhdGVcIiwgXCJ0ZXh0XCI6IFwi5L+u5pS5XCJ9LFxuICAgIHtcImlkXCI6IFwiZGVsZXRlXCIsIFwidGV4dFwiOiBcIuWIoOmZpFwifVxuXTtcbndpbmRvdy5yZW5kZXJTZXR0aW5nTWVudUFjdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgcmV0dXJuIGJvb3QuY3JlYXRlQWN0aW9uQnV0dG9uKFwi5Yig6Zmk6I+c5Y2VXCIsIFwiaWNvbi1yZW1vdmVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBtaW5pLmdldChcIm1lbnUtc2V0dGluZy1ncmlkXCIpLnJlbW92ZU5vZGUoZS5yZWNvcmQpO1xuICAgIH0pO1xufVxuXG53aW5kb3cucmVuZGVyTWVudUFjdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGh0bWwgPSBbXTtcbiAgICB2YXIgcm93ID0gZS5yZWNvcmQ7XG5cbiAgICBodG1sLnB1c2goYm9vdC5jcmVhdGVBY3Rpb25CdXR0b24oXCLmt7vliqDliLDnlKjmiLfoj5zljZVcIiwgXCJpY29uLWFycm93LWxlZnRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2V0dGluZ0dyaWQgPSBtaW5pLmdldChcIm1lbnUtc2V0dGluZy1ncmlkXCIpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU5vZGUobWVudSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB7XG4gICAgICAgICAgICAgICAgbWVudUlkOiBtZW51LmlkLFxuICAgICAgICAgICAgICAgIGljb246IG1lbnUuaWNvbixcbiAgICAgICAgICAgICAgICBtZW51OiBtaW5pLmNsb25lKG1lbnUpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gW107XG4gICAgICAgICAgICBpZiAobWVudS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICQobWVudS5jaGlsZHJlbikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goY3JlYXRlTm9kZSh0aGlzKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBub2RlID0gY3JlYXRlTm9kZShyb3cpO1xuICAgICAgICBzZXR0aW5nR3JpZC5hZGROb2RlKG5vZGUpO1xuICAgICAgICBzZXR0aW5nR3JpZC5leHBhbmROb2RlKG5vZGUpO1xuICAgIH0pKTtcblxuICAgIHJldHVybiBodG1sLmpvaW4oXCJcIik7XG59XG5mdW5jdGlvbiBpbml0UGVybWlzc2lvbkRhdGEoZGV0YWlscykge1xuICAgIGlmIChkZXRhaWxzKSB7XG4gICAgICAgIHZhciBsaXN0ID0gW107XG4gICAgICAgICQoZGV0YWlscykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcGVybWlzc2lvbiA9IHBlcm1pc3Npb25NYXBbdGhpcy5wZXJtaXNzaW9uSWRdO1xuICAgICAgICAgICAgdmFyIG9wdGlvbmFsRmllbGRzID0gcGVybWlzc2lvbi5vcHRpb25hbEZpZWxkcztcbiAgICAgICAgICAgIHZhciBhY3Rpb25zID0gW107XG4gICAgICAgICAgICB2YXIgZGV0YWlsID0gbWluaS5jbG9uZSh0aGlzKTtcblxuICAgICAgICAgICAgcGVybWlzc2lvbi5hY3Rpb25NYXAgPSB7fTtcbiAgICAgICAgICAgICQocGVybWlzc2lvbi5hY3Rpb25zKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBwZXJtaXNzaW9uLmFjdGlvbk1hcFt0aGlzLmFjdGlvbl0gPSB0aGlzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZXRhaWwuZGF0YUFjY2Vzc2VzTWFwID0ge307XG4gICAgICAgICAgICAkKGRldGFpbC5kYXRhQWNjZXNzZXMpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRldGFpbC5kYXRhQWNjZXNzZXNNYXBbdGhpcy5hY3Rpb24gKyB0aGlzLnR5cGVdID0gdGhpcztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZnVuY3Rpb24gaXNDaGVja2VkKGFjdGlvbiwgZmllbGQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWlsLmFjdGlvbnMuaW5kZXhPZihhY3Rpb24pID09IC0xKXJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFBY2Nlc3MgPSBkZXRhaWwuZGF0YUFjY2Vzc2VzTWFwW2FjdGlvbiArIFwiREVOWV9GSUVMRFNcIl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhQWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShtaW5pLmRlY29kZShkYXRhQWNjZXNzLmNvbmZpZykuZmllbGRzLmluZGV4T2YoZmllbGQpID4gLTEpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQocGVybWlzc2lvbi5hY3Rpb25zKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgZmllbGRzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFBY2Nlc3NlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChkZXRhaWwuZGF0YUFjY2Vzc2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICQoZGV0YWlsLmRhdGFBY2Nlc3NlcykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50eXBlID09IFwiREVOWV9GSUVMRFNcIilyZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3Rpb24gPT0gYWN0aW9uLmFjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhQWNjZXNzZXMucHVzaCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQob3B0aW9uYWxGaWVsZHMpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGRDaGVja2VkID0gaXNDaGVja2VkKGFjdGlvbi5hY3Rpb24sIHRoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmllbGRzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICwgY2hlY2tlZDogZmllbGRDaGVja2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAsIGZpZWxkOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICwgdGV4dDogdGhpcy5kZXNjcmliZSA/IHRoaXMuZGVzY3JpYmUgOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGlvbkRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogdGhpcy5hY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZGVzY3JpYmUgPyB0aGlzLmRlc2NyaWJlIDogdGhpcy5hY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBtaW5pLmNsb25lKGZpZWxkcyksXG4gICAgICAgICAgICAgICAgICAgIGRhdGFBY2Nlc3NlczogZGF0YUFjY2Vzc2VzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGRzLmxlbmd0aCA9PSAwICYmIGRldGFpbC5hY3Rpb25zLmluZGV4T2YodGhpcy5hY3Rpb24pICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbkRhdGEuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFjdGlvbnMucHVzaChhY3Rpb25EYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGlzdC5wdXNoKHtwZXJtaXNzaW9uOiB0aGlzLCBwZXJtaXNzaW9uSWQ6IHBlcm1pc3Npb24uaWQsIHRleHQ6IHRoaXMubmFtZSwgY2hpbGRyZW46IGFjdGlvbnN9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGxpc3QpO1xuICAgICAgICBtaW5pLmdldChcInBlcm1pc3Npb24tc2V0dGluZy1ncmlkXCIpLmxvYWREYXRhKGxpc3QpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFNlbGVjdE1lbnVQZXJtaXNzaW9uKCkge1xuICAgIHZhciBzZWxlY3RNZW51cyA9IG1pbmkuZ2V0KFwibWVudS1zZXR0aW5nLWdyaWRcIikuZ2V0TGlzdCgpO1xuICAgIHZhciBwZXJtaXNzaW9ucyA9IFtdO1xuICAgICQoc2VsZWN0TWVudXMpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGVybWlzc2lvbjtcbiAgICAgICAgdmFyIG1lbnVQZXIgPSB0aGlzLm1lbnUucGVybWlzc2lvbklkO1xuICAgICAgICBpZiAobWVudVBlciltZW51UGVyID0gbWVudVBlci5zcGxpdChcIixcIik7XG4gICAgICAgIGlmICh0aGlzLm1lbnUpIHtcbiAgICAgICAgICAgICQobWVudVBlcikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBlcm1pc3Npb24gPSBwZXJtaXNzaW9uTWFwW3RoaXNdKVxuICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9ucy5wdXNoKHBlcm1pc3Npb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWluaS5jbG9uZShwZXJtaXNzaW9ucyk7XG59XG5mdW5jdGlvbiBnZXRQZXJtaXNzaW9uRGF0YSgpIHtcbiAgICB2YXIgZGF0YSA9IG1pbmkuZ2V0KFwicGVybWlzc2lvbi1zZXR0aW5nLWdyaWRcIikuZ2V0RGF0YSgpO1xuICAgIHZhciBsaXN0ID0gW107XG4gICAgJChkYXRhKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICAgICAgdmFyIGRhdGFBY2Nlc3NlcyA9IHt9O1xuICAgICAgICAkKHRoaXMuY2hpbGRyZW4pLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoYWN0aW9uLmRhdGFBY2Nlc3Nlcykge1xuICAgICAgICAgICAgICAgICQoYWN0aW9uLmRhdGFBY2Nlc3NlcykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFBY2Nlc3Nlc1t0aGlzLmFjdGlvbiArIHRoaXMudHlwZV0gPSB0aGlzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFjdGlvbi5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIHZhciBkZW55RmllbGQgPSBbXTtcbiAgICAgICAgICAgICAgICAkKGFjdGlvbi5jaGlsZHJlbikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jaGVja2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVueUZpZWxkLnB1c2godGhpcy5maWVsZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGRlbnlGaWVsZC5sZW5ndGggPT0gYWN0aW9uLmNoaWxkcmVuLmxlbmd0aCAmJiAhYWN0aW9uLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL+ayoeacieWFqOmDqOi/m+ihjOWLvumAiSzliJnov5vooYxkZW555pON5L2cXG4gICAgICAgICAgICAgICAgaWYgKGRlbnlGaWVsZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZERhdGFBY2Nlc3MgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGFjdGlvbi5hY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkRFTllfRklFTERTXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmliZTogXCLkuI3og73mk43kvZzlrZfmrrVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogbWluaS5lbmNvZGUoe2ZpZWxkczogZGVueUZpZWxkfSlcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YUFjY2Vzc2VzW2ZpZWxkRGF0YUFjY2Vzcy5hY3Rpb24gKyBmaWVsZERhdGFBY2Nlc3MudHlwZV0gPSBmaWVsZERhdGFBY2Nlc3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWN0aW9ucy5wdXNoKGFjdGlvbi5hY3Rpb24pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy/orr7nva5cbiAgICAgICAgaWYgKHRoaXMuZGF0YUFjY2Vzc2VzKSB7XG4gICAgICAgICAgICAkKHRoaXMuZGF0YUFjY2Vzc2VzKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YUFjY2VzcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgJChhY3Rpb25zKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhQWNjZXNzZXNbdGhpcy5hY3Rpb24gKyBkYXRhQWNjZXNzLnR5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhQWNjZXNzZXNbdGhpcy5hY3Rpb24gKyBkYXRhQWNjZXNzLnR5cGVdID0gZGF0YUFjY2VzcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgYWN0aW9uIGluIGRhdGFBY2Nlc3Nlcykge1xuICAgICAgICAgICAgdG1wLnB1c2goZGF0YUFjY2Vzc2VzW2FjdGlvbl0pO1xuICAgICAgICB9XG4gICAgICAgIC8vY3JlYXRlIGRhdGEgYWNjZXNzXG4gICAgICAgIGxpc3QucHVzaCh7cGVybWlzc2lvbklkOiB0aGlzLnBlcm1pc3Npb25JZCwgYWN0aW9uczogYWN0aW9ucywgZGF0YUFjY2Vzc2VzOiB0bXB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gbGlzdDtcbn1cbmZ1bmN0aW9uIGluaXRQZXJtaXNzaW9uVGFiQWN0aXZlKCkge1xuICAgIHZhciB0YWIgPSBtaW5pLmdldChcInRhYnNcIik7XG4gICAgdGFiLm9uKFwiYmVmb3JlYWN0aXZlY2hhbmdlZFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdGFiID0gZS50YWI7XG4gICAgICAgIGlmICh0YWIubmFtZSA9PSBcInBlcm1pc3Npb25TZXR0aW5nXCIpIHtcbiAgICAgICAgICAgIHZhciBtZW51UGVybWlzc2lvbnMgPSBnZXRTZWxlY3RNZW51UGVybWlzc2lvbigpO1xuICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTtcbiAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgICAgIHZhciBvbGQgPSBnZXRQZXJtaXNzaW9uRGF0YSgpO1xuICAgICAgICAgICAgdmFyIGRhdGFNYXAgPSB7fTtcbiAgICAgICAgICAgICQob2xkKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBkYXRhTWFwW3RoaXMucGVybWlzc2lvbklkXSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFBY2Nlc3Nlc01hcCA9IHRoaXMuZGF0YUFjY2Vzc2VzTWFwID0ge307XG4gICAgICAgICAgICAgICAgJCh0aGlzLmRhdGFBY2Nlc3NlcykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFBY2Nlc3Nlc01hcFt0aGlzLmFjdGlvbiArIHRoaXMudHlwZV0gPSB0aGlzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmdW5jdGlvbiBpc0NoZWNrZWQocGVybWlzc2lvbiwgYWN0aW9uLCBmaWVsZCkge1xuICAgICAgICAgICAgICAgIGlmIChvbGQubGVuZ3RoID09IDApcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIG9sZFBlciA9IGRhdGFNYXBbcGVybWlzc2lvbl07XG4gICAgICAgICAgICAgICAgaWYgKCFvbGRQZXIpcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKG9sZFBlci5hY3Rpb25zLmluZGV4T2YoYWN0aW9uKSA+IC0xKSlyZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhQWNjZXNzID0gb2xkUGVyLmRhdGFBY2Nlc3Nlc01hcFthY3Rpb24gKyBcIkRFTllfRklFTERTXCJdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YUFjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEobWluaS5kZWNvZGUoZGF0YUFjY2Vzcy5jb25maWcpLmZpZWxkcy5pbmRleE9mKGZpZWxkKSA+IC0xKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJChtZW51UGVybWlzc2lvbnMpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh0bXAuaW5kZXhPZih0aGlzLmlkKSAhPSAtMSlyZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIGFjdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgcGVybWlzc2lvbiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbmFsRmllbGRzID0gdGhpcy5vcHRpb25hbEZpZWxkcztcbiAgICAgICAgICAgICAgICB2YXIgb2xkUGVyID0gZGF0YU1hcFtwZXJtaXNzaW9uLmlkXTtcblxuICAgICAgICAgICAgICAgICQodGhpcy5hY3Rpb25zKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFBY2Nlc3NlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAob2xkUGVyICYmIG9sZFBlci5kYXRhQWNjZXNzZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQob2xkUGVyLmRhdGFBY2Nlc3NlcykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHlwZSA9PSBcIkRFTllfRklFTERTXCIpcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbiA9PSBhY3Rpb24uYWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhQWNjZXNzZXMucHVzaCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQob3B0aW9uYWxGaWVsZHMpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkQ2hlY2tlZCA9IGlzQ2hlY2tlZChwZXJtaXNzaW9uLmlkLCBhY3Rpb24uYWN0aW9uLCB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmllbGRzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGNoZWNrZWQ6IGZpZWxkQ2hlY2tlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgZmllbGQ6IHRoaXMubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgdGV4dDogdGhpcy5kZXNjcmliZSA/IHRoaXMuZGVzY3JpYmUgOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbkRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFjdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiB0aGlzLmFjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZGVzY3JpYmUgPyB0aGlzLmRlc2NyaWJlIDogdGhpcy5hY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogbWluaS5jbG9uZShmaWVsZHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUFjY2Vzc2VzOiBkYXRhQWNjZXNzZXNcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkcy5sZW5ndGggPT0gMCAmJiBvbGRQZXIgJiYgb2xkUGVyLmFjdGlvbnMuaW5kZXhPZih0aGlzLmFjdGlvbikgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkRhdGEuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYWN0aW9ucy5wdXNoKGFjdGlvbkRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxpc3QucHVzaCh7cGVybWlzc2lvbjogdGhpcywgcGVybWlzc2lvbklkOiB0aGlzLmlkLCB0ZXh0OiB0aGlzLm5hbWUsIGNoaWxkcmVuOiBhY3Rpb25zfSk7XG4gICAgICAgICAgICAgICAgdG1wLnB1c2godGhpcy5pZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1pbmkuZ2V0KFwicGVybWlzc2lvbi1zZXR0aW5nLWdyaWRcIikubG9hZERhdGEobGlzdCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGluaXRPcmdTZXR0aW5nKCkge1xuICAgIHZhciBvcmdfaWQgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcIm9yZ19pZFwiKTtcbiAgICBpZiAoIW9yZ19pZCkge1xuICAgICAgICAkKFwiLm9yZy1zZXR0aW5nXCIpLmhpZGUoKTtcbiAgICB9XG5cbn1cbmZ1bmN0aW9uIGluaXREYXRhKHR5cGUsIHNldHRpbmdGb3IpIHtcbiAgICBmdW5jdGlvbiBpbml0U2V0dGluZygpIHtcbiAgICAgICAgaWYgKHNldHRpbmdGb3IpIHtcbiAgICAgICAgICAgIHJlcXVlc3QuZ2V0KFwiYXV0ei1zZXR0aW5nL1wiICsgdHlwZSArIFwiL1wiICsgc2V0dGluZ0ZvciwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgc2V0dGluZ0dyaWQgPSBtaW5pLmdldChcIm1lbnUtc2V0dGluZy1ncmlkXCIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2V0dGluZyA9IHJlc3BvbnNlLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lbnVzID0gc2V0dGluZy5tZW51cztcbiAgICAgICAgICAgICAgICAgICAgJChtZW51cykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVudSA9IG1lbnVNYXBbdGhpcy5tZW51SWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW51ID0gbWVudTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZW51KXRoaXMuaWNvbiA9IG1lbnUuaWNvbjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdHcmlkLmxvYWRMaXN0KG1lbnVzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbHMgPSBzZXR0aW5nLmRldGFpbHM7XG4gICAgICAgICAgICAgICAgICAgIGluaXRQZXJtaXNzaW9uRGF0YShkZXRhaWxzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBib290LnNob3dUaXBzKFwi6I635Y+W5pWw5o2u5aSx6LSlOlwiICsgcmVzcG9uc2UubWVzc2FnZSwgXCJkYW5nZXJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXF1ZXN0LmdldChcIm1lbnU/cGFnaW5nPWZhbHNlXCIsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgbWVudUxpc3QgPSByZXNwb25zZS5yZXN1bHQuZGF0YTtcbiAgICAgICAgICAgICQobWVudUxpc3QpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG1lbnVNYXBbdGhpcy5pZF0gPSB0aGlzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtaW5pLmdldChcIm1lbnUtZ3JpZFwiKS5sb2FkTGlzdChtZW51TGlzdCk7XG4gICAgICAgICAgICByZXF1ZXN0LmdldChcInBlcm1pc3Npb24/cGFnaW5nPWZhbHNlXCIsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb25MaXN0ID0gcmVzcG9uc2UucmVzdWx0LmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICQocGVybWlzc2lvbkxpc3QpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbk1hcFt0aGlzLmlkXSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbml0U2V0dGluZygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJvb3Quc2hvd1RpcHMoXCLliqDovb3mnYPpmZDlpLHotKU6XCIgKyByZXNwb25zZS5tZXNzYWdlLCBcImRhbmdlclwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYm9vdC5zaG93VGlwcyhcIuWKoOi9veiPnOWNleWksei0pTpcIiArIHJlc3BvbnNlLm1lc3NhZ2UsIFwiZGFuZ2VyXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbn1cblxuZnVuY3Rpb24gZ2V0RGF0YSh0eXBlLCBzZXR0aW5nRm9yKSB7XG4gICAgdmFyIGRhdGEgPSB7dHlwZTogdHlwZSwgc2V0dGluZ0Zvcjogc2V0dGluZ0Zvcn07XG4gICAgZGF0YS5tZW51cyA9IG1pbmkuZ2V0KFwibWVudS1zZXR0aW5nLWdyaWRcIikuZ2V0RGF0YSgpO1xuICAgIHZhciBkZXRhaWxzID0gZ2V0UGVybWlzc2lvbkRhdGEoKTtcbiAgICBkYXRhLmRldGFpbHMgPSBkZXRhaWxzO1xuICAgIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBpbml0R3JpZCgpIHtcblxufVxuYm9vdC5sb2FkTWluaXVpKGZ1bmN0aW9uICgpIHtcbiAgICBtaW5pLnBhcnNlKCk7XG4gICAgdmFyIHR5cGUgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcInR5cGVcIik7XG4gICAgdmFyIHNldHRpbmdGb3IgPSByZXF1ZXN0LmdldFBhcmFtZXRlcihcInNldHRpbmdGb3JcIik7XG4gICAgaWYgKCF0eXBlIHx8ICFzZXR0aW5nRm9yKSB7XG4gICAgICAgIGJvb3Quc2hvd1RpcHMoXCLlj4LmlbDplJnor68hXCIsIFwiZGFuZ2VyXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGluaXRHcmlkKCk7XG4gICAgaW5pdERhdGEodHlwZSwgc2V0dGluZ0Zvcik7XG4gICAgaW5pdFBlcm1pc3Npb25UYWJBY3RpdmUoKTtcbiAgICBpbml0T3JnU2V0dGluZygpO1xuICAgICQoXCIuc2F2ZS1idXR0b25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsb2FkaW5nID0gYm9vdC5sb2FkaW5nKFwi5o+Q5Lqk5LitLi4uXCIpO1xuICAgICAgICB2YXIgZGF0YSA9IGdldERhdGEodHlwZSwgc2V0dGluZ0Zvcik7XG4gICAgICAgIHJlcXVlc3QucGF0Y2goXCJhdXR6LXNldHRpbmdcIiwgZGF0YSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBsb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgYm9vdC5zaG93VGlwcyhcIuS/neWtmOaIkOWKn1wiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYm9vdC5zaG93VGlwcyhcIuS/neWtmOWksei0pTpcIiArIHJlc3BvbnNlLm1lc3NhZ2UsIFwiZGFuZ2VyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvYXV0ei1zZXR0aW5ncy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSA4Il0sInNvdXJjZVJvb3QiOiIifQ==')},2:function(module,exports){eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9ucy9jb21tb24uY3NzPzQzMDMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tbW9ucy9jb21tb24uY3NzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIDIgMyA0IDUgNiA3IDggMTAgMTEgMTIgMTMiXSwic291cmNlUm9vdCI6IiJ9")},4:function(module,exports){eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYXV0ei1zZXR0aW5ncy9pbmRleC5jc3M/OWJjOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hdXR6LXNldHRpbmdzL2luZGV4LmNzc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDgiXSwic291cmNlUm9vdCI6IiJ9")}},[14]);