webpackJsonp([0,14,15],{0:function(module,exports,__webpack_require__){eval('window.BASE_PATH = __webpack_require__.p;\nwindow.API_BASE_PATH = getCookie("api_root", "/");\n\nwindow.mini_debugger = false;\n/**\n * 引入一个插件(js或者css)\n * @param path 插件路径\n * @param callback 加载完成回调,css不会执行回调\n */\nfunction importPlugin(path, callback) {\n    if (path.indexOf("http") != 0 || path.indexOf("//") != 0) {\n        path = window.BASE_PATH + path;\n    }\n    var head = document.getElementsByTagName(\'head\')[0];\n    if (path.indexOf("js") == path.length - 2) {\n        var script = document.createElement(\'script\');\n        script.type = \'text/javascript\';\n        script.charset = \'utf-8\';\n        script.timeout = 120000;\n        if (typeof callback != "undefined")\n            script.async = true;\n        script.src = path;\n        head.appendChild(script);\n        function onload() {\n            script.onerror = script.onload = undefined;\n            if (callback)callback();\n        }\n\n        script.onload = onload;\n        script.onerror = onload;\n\n    } else if (path.indexOf("css") == path.length - 3) {\n        var style = document.createElement(\'link\');\n        style.rel = "stylesheet";\n        style.href = path;\n        style.type = "text/css";\n        head.appendChild(style);\n    }\n}\n\n/**\n * 获取cooke\n * @param sName cookie名称\n * @param defaultVal 默认值\n * @returns {*} cookie值\n */\nfunction getCookie(sName, defaultVal) {\n    var aCookie = document.cookie.split("; ");\n    var lastMatch = null;\n    for (var i = 0; i < aCookie.length; i++) {\n        var aCrumb = aCookie[i].split("=");\n        if (sName == aCrumb[0]) {\n            lastMatch = aCrumb;\n        }\n    }\n    if (lastMatch) {\n        var v = lastMatch[1];\n        if (v === undefined) return v;\n        return unescape(v);\n    }\n    return defaultVal;\n}\nfunction loadMiniui(callback) {\n\n    var theme = getCookie("theme", window.miniui_theme ? window.miniui_theme : "pure");\n    var mode = getCookie("mode", "large");\n\n    function loadMini() {\n        importPlugin("plugins/miniui/themes/default/miniui.css");\n        importPlugin("plugins/miniui/themes/icons.css");\n        importPlugin(\'plugins/miniui/themes/\' + theme + \'/skin.css\');\n        importPlugin("plugins/miniui/themes/default/" + mode + "-mode.css");\n        importPlugin("plugins/miniui/miniui.js", callback);\n    }\n\n    if (!window.jQuery) {\n        importPlugin("plugins/jquery/jquery.min.js", loadMini);\n    } else {\n        loadMini();\n    }\n}\nfunction showTips(msg, state) {\n    mini.showTips({\n        content: msg,\n        state: state || \'success\',\n        x: \'center\',\n        y: \'top\',\n        timeout: 3000\n    });\n}\n/**\n * 打开窗口\n * @param url 窗口的URL\n * @param title 标题\n * @param width 宽度\n * @param height 高度\n * @param ondestroy 销毁时回调 , 打开的页面通过 boot.closeWindow(response) ;传递返回值. 通过回调参数获取.\n * @param onload 加载时毁掉 , 可通过 this.getIFrameEl(); 获取frame对象\n */\nfunction openWindow(url, title, width, height, ondestroy, onload) {\n    if (url.indexOf("http") != 0) {\n        if (url.indexOf("/") == 0)url = url.substr(1);\n        url = window.BASE_PATH + url;\n    }\n    mini.open({\n        url: url,\n        showMaxButton: true,\n        title: title,\n        width: width,\n        height: height,\n        maskOnLoad: false,\n        showModal: false,\n        onload: onload,\n        ondestroy: ondestroy\n    });\n}\n\nmodule.exports = {\n    /**\n     * 给表单绑定回车事件\n     * @param formEl 表单选择器,如:#search-box\n     * @param fun 回调\n     */\n    bindOnEnter: function (formEl, fun) {\n        var form = new mini.Form(formEl);\n        var fields = form.getFields();\n        for (var i = 0; i < fields.length; i++) {\n            var field = fields[i];\n            if (!field.onenter && field.on) {\n                field.on("enter", fun);\n            }\n        }\n    },\n    /**\n     * 查询表格\n     * @param formEL 查询条件表单选择器,如:#search-box\n     * @param grid 表格对象\n     */\n    searchGrid: function (formEL, grid) {\n        var param = new mini.Form(formEL).getData();\n        var request = __webpack_require__(1);\n        grid.load(request.encodeQueryParam(param));\n    },\n    /**\n     * 引入一个插件\n     */\n    importPlugin: importPlugin,\n    /**\n     * 引入miniui\n     */\n    loadMiniui: loadMiniui,\n    /**\n     * 打开窗口\n     */\n    openWindow: openWindow,\n    /**\n     * 显示消息提示\n     */\n    showTips: showTips,\n    /**\n     * 关闭窗口并返回数据\n     * @param data\n     * @returns {*}\n     */\n    closeWindow: function (data) {\n        if (window.CloseOwnerWindow) return window.CloseOwnerWindow(data);\n        else window.close();\n    },\n    showFormErrors: function (formEl, result) {\n        var errorMessage;\n        if (typeof result == \'string\') {\n            errorMessage = mini.decode(result);\n        } else {\n            errorMessage = result;\n        }\n        if (errorMessage) {\n            $(errorMessage).each(function () {\n                var field = mini.getbyName(this.field);\n                if (field) {\n                    field.setIsValid(false);\n                    field.setErrorText(this.message);\n                    field.focus();\n                }\n            });\n        }\n    },\n    /**\n     * 初始化表格对象,修改其默认配置,以适配后台api\n     * @param grid 表格对象\n     */\n    initGrid: function (grid) {\n        grid.setSortFieldField("sorts[0].name");\n        grid.setSortOrderField("sorts[0].dir");\n        //后台响应数据格式\n        grid.setDataField("result.data");\n        grid.setTotalField("result.total");\n        grid.allowAlternating = true;\n        //查询全部为GET\n        grid.setAjaxOptions({\n            type: "GET",\n            dataType: "json"\n        });\n        grid.un("loaderror",\n            function (e) {\n            });\n        // 解决弹出选择控件的bug\n        grid.on("cellbeginedit", function (e) {\n            if (e.editor && e.editor.type == "buttonedit") {\n                e.editor.setValue(e.value);\n                e.editor.setText(e.value);\n            }\n        });\n        //加载失败进行提示\n        grid.on("loaderror",\n            function (e) {\n                try {\n                    var res = mini.decode(e.xhr.responseText);\n                    if (res.status == 401) {\n                        if (window.doLogin) {\n                            window.doLogin(function () {\n                                grid.reload()\n                            });\n                        }\n                        else if (window.top.doLogin) {\n                            window.top.doLogin(function () {\n                                grid.reload()\n                            });\n                        }\n                        else {\n                            showTips("请登录", "danger");\n                        }\n\n                    } else if (res.status == 403) {\n                        showTips("权限不够", "danger");\n                    } else if (res.status == 500) {\n                        showTips("数据加载失败:" + res.message, "danger");\n                        if (window.console) {\n                            window.console.log(res.message);\n                        }\n                    } else {\n                        showTips("数据加载失败:" + res.message, "danger");\n                    }\n                } catch (e) {\n                    showTips("加载失败...");\n                }\n            });\n\n        var tip = new mini.ToolTip();\n        tip.set({\n            target: document,\n            selector: \'.action-button\'\n        });\n    },\n    createActionButton: function (title, icon, onclick) {\n        if (!window.action_countter)window.action_countter = 0;\n        var callId = "action_" + (++window.action_countter);\n        window[callId] = onclick;\n        return ["<span", " onclick=\'", callId, "()\'", " title=\'", title, "\'", " class=\'action-button ", icon, "\'", "></span>"].join("");\n    },\n    /**\n     * 显示加载中提示\n     * @param message 提示的消息\n     * @returns {{close: hide,hide:hide}} 关闭显示的回调,调用close和hide都可以\n     */\n    loading: function (message) {\n        mini.mask({\n            el: document.body,\n            cls: \'mini-mask-loading\',\n            html: message\n        });\n        function hide() {\n            mini.unmask(document.body);\n        }\n\n        return {\n            close: hide,\n            hide: hide\n        };\n    },\n    getCookie: getCookie,\n    getFormData: function (formEl, validate) {\n        var form = new mini.Form(formEl);\n        form.validate();\n        if (validate && form.isValid() == false) {\n            return;\n        }\n        return form.getData();\n    }\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYm9vdC5qcz9lN2UzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxFQUFFO0FBQ2Y7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBLG1CQUFtQixvQkFBb0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFO0FBQ2hFLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsbUJBQW1CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUJBQXFCO0FBQ3JCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVCQUF1QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cuQkFTRV9QQVRIID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX187XG53aW5kb3cuQVBJX0JBU0VfUEFUSCA9IGdldENvb2tpZShcImFwaV9yb290XCIsIFwiL1wiKTtcblxud2luZG93Lm1pbmlfZGVidWdnZXIgPSBmYWxzZTtcbi8qKlxuICog5byV5YWl5LiA5Liq5o+S5Lu2KGpz5oiW6ICFY3NzKVxuICogQHBhcmFtIHBhdGgg5o+S5Lu26Lev5b6EXG4gKiBAcGFyYW0gY2FsbGJhY2sg5Yqg6L295a6M5oiQ5Zue6LCDLGNzc+S4jeS8muaJp+ihjOWbnuiwg1xuICovXG5mdW5jdGlvbiBpbXBvcnRQbHVnaW4ocGF0aCwgY2FsbGJhY2spIHtcbiAgICBpZiAocGF0aC5pbmRleE9mKFwiaHR0cFwiKSAhPSAwIHx8IHBhdGguaW5kZXhPZihcIi8vXCIpICE9IDApIHtcbiAgICAgICAgcGF0aCA9IHdpbmRvdy5CQVNFX1BBVEggKyBwYXRoO1xuICAgIH1cbiAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gICAgaWYgKHBhdGguaW5kZXhPZihcImpzXCIpID09IHBhdGgubGVuZ3RoIC0gMikge1xuICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gICAgICAgIHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04JztcbiAgICAgICAgc2NyaXB0LnRpbWVvdXQgPSAxMjAwMDA7XG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gICAgICAgIHNjcmlwdC5zcmMgPSBwYXRoO1xuICAgICAgICBoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIGZ1bmN0aW9uIG9ubG9hZCgpIHtcbiAgICAgICAgICAgIHNjcmlwdC5vbmVycm9yID0gc2NyaXB0Lm9ubG9hZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayljYWxsYmFjaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IG9ubG9hZDtcbiAgICAgICAgc2NyaXB0Lm9uZXJyb3IgPSBvbmxvYWQ7XG5cbiAgICB9IGVsc2UgaWYgKHBhdGguaW5kZXhPZihcImNzc1wiKSA9PSBwYXRoLmxlbmd0aCAtIDMpIHtcbiAgICAgICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICBzdHlsZS5yZWwgPSBcInN0eWxlc2hlZXRcIjtcbiAgICAgICAgc3R5bGUuaHJlZiA9IHBhdGg7XG4gICAgICAgIHN0eWxlLnR5cGUgPSBcInRleHQvY3NzXCI7XG4gICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiDojrflj5Zjb29rZVxuICogQHBhcmFtIHNOYW1lIGNvb2tpZeWQjeensFxuICogQHBhcmFtIGRlZmF1bHRWYWwg6buY6K6k5YC8XG4gKiBAcmV0dXJucyB7Kn0gY29va2ll5YC8XG4gKi9cbmZ1bmN0aW9uIGdldENvb2tpZShzTmFtZSwgZGVmYXVsdFZhbCkge1xuICAgIHZhciBhQ29va2llID0gZG9jdW1lbnQuY29va2llLnNwbGl0KFwiOyBcIik7XG4gICAgdmFyIGxhc3RNYXRjaCA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhQ29va2llLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBhQ3J1bWIgPSBhQ29va2llW2ldLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgaWYgKHNOYW1lID09IGFDcnVtYlswXSkge1xuICAgICAgICAgICAgbGFzdE1hdGNoID0gYUNydW1iO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChsYXN0TWF0Y2gpIHtcbiAgICAgICAgdmFyIHYgPSBsYXN0TWF0Y2hbMV07XG4gICAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHJldHVybiB2O1xuICAgICAgICByZXR1cm4gdW5lc2NhcGUodik7XG4gICAgfVxuICAgIHJldHVybiBkZWZhdWx0VmFsO1xufVxuZnVuY3Rpb24gbG9hZE1pbml1aShjYWxsYmFjaykge1xuXG4gICAgdmFyIHRoZW1lID0gZ2V0Q29va2llKFwidGhlbWVcIiwgd2luZG93Lm1pbml1aV90aGVtZSA/IHdpbmRvdy5taW5pdWlfdGhlbWUgOiBcInB1cmVcIik7XG4gICAgdmFyIG1vZGUgPSBnZXRDb29raWUoXCJtb2RlXCIsIFwibGFyZ2VcIik7XG5cbiAgICBmdW5jdGlvbiBsb2FkTWluaSgpIHtcbiAgICAgICAgaW1wb3J0UGx1Z2luKFwicGx1Z2lucy9taW5pdWkvdGhlbWVzL2RlZmF1bHQvbWluaXVpLmNzc1wiKTtcbiAgICAgICAgaW1wb3J0UGx1Z2luKFwicGx1Z2lucy9taW5pdWkvdGhlbWVzL2ljb25zLmNzc1wiKTtcbiAgICAgICAgaW1wb3J0UGx1Z2luKCdwbHVnaW5zL21pbml1aS90aGVtZXMvJyArIHRoZW1lICsgJy9za2luLmNzcycpO1xuICAgICAgICBpbXBvcnRQbHVnaW4oXCJwbHVnaW5zL21pbml1aS90aGVtZXMvZGVmYXVsdC9cIiArIG1vZGUgKyBcIi1tb2RlLmNzc1wiKTtcbiAgICAgICAgaW1wb3J0UGx1Z2luKFwicGx1Z2lucy9taW5pdWkvbWluaXVpLmpzXCIsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBpZiAoIXdpbmRvdy5qUXVlcnkpIHtcbiAgICAgICAgaW1wb3J0UGx1Z2luKFwicGx1Z2lucy9qcXVlcnkvanF1ZXJ5Lm1pbi5qc1wiLCBsb2FkTWluaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbG9hZE1pbmkoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzaG93VGlwcyhtc2csIHN0YXRlKSB7XG4gICAgbWluaS5zaG93VGlwcyh7XG4gICAgICAgIGNvbnRlbnQ6IG1zZyxcbiAgICAgICAgc3RhdGU6IHN0YXRlIHx8ICdzdWNjZXNzJyxcbiAgICAgICAgeDogJ2NlbnRlcicsXG4gICAgICAgIHk6ICd0b3AnLFxuICAgICAgICB0aW1lb3V0OiAzMDAwXG4gICAgfSk7XG59XG4vKipcbiAqIOaJk+W8gOeql+WPo1xuICogQHBhcmFtIHVybCDnqpflj6PnmoRVUkxcbiAqIEBwYXJhbSB0aXRsZSDmoIfpophcbiAqIEBwYXJhbSB3aWR0aCDlrr3luqZcbiAqIEBwYXJhbSBoZWlnaHQg6auY5bqmXG4gKiBAcGFyYW0gb25kZXN0cm95IOmUgOavgeaXtuWbnuiwgyAsIOaJk+W8gOeahOmhtemdoumAmui/hyBib290LmNsb3NlV2luZG93KHJlc3BvbnNlKSA75Lyg6YCS6L+U5Zue5YC8LiDpgJrov4flm57osIPlj4LmlbDojrflj5YuXG4gKiBAcGFyYW0gb25sb2FkIOWKoOi9veaXtuavgeaOiSAsIOWPr+mAmui/hyB0aGlzLmdldElGcmFtZUVsKCk7IOiOt+WPlmZyYW1l5a+56LGhXG4gKi9cbmZ1bmN0aW9uIG9wZW5XaW5kb3codXJsLCB0aXRsZSwgd2lkdGgsIGhlaWdodCwgb25kZXN0cm95LCBvbmxvYWQpIHtcbiAgICBpZiAodXJsLmluZGV4T2YoXCJodHRwXCIpICE9IDApIHtcbiAgICAgICAgaWYgKHVybC5pbmRleE9mKFwiL1wiKSA9PSAwKXVybCA9IHVybC5zdWJzdHIoMSk7XG4gICAgICAgIHVybCA9IHdpbmRvdy5CQVNFX1BBVEggKyB1cmw7XG4gICAgfVxuICAgIG1pbmkub3Blbih7XG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICBzaG93TWF4QnV0dG9uOiB0cnVlLFxuICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgIG1hc2tPbkxvYWQ6IGZhbHNlLFxuICAgICAgICBzaG93TW9kYWw6IGZhbHNlLFxuICAgICAgICBvbmxvYWQ6IG9ubG9hZCxcbiAgICAgICAgb25kZXN0cm95OiBvbmRlc3Ryb3lcbiAgICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgLyoqXG4gICAgICog57uZ6KGo5Y2V57uR5a6a5Zue6L2m5LqL5Lu2XG4gICAgICogQHBhcmFtIGZvcm1FbCDooajljZXpgInmi6nlmags5aaCOiNzZWFyY2gtYm94XG4gICAgICogQHBhcmFtIGZ1biDlm57osINcbiAgICAgKi9cbiAgICBiaW5kT25FbnRlcjogZnVuY3Rpb24gKGZvcm1FbCwgZnVuKSB7XG4gICAgICAgIHZhciBmb3JtID0gbmV3IG1pbmkuRm9ybShmb3JtRWwpO1xuICAgICAgICB2YXIgZmllbGRzID0gZm9ybS5nZXRGaWVsZHMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBmaWVsZCA9IGZpZWxkc1tpXTtcbiAgICAgICAgICAgIGlmICghZmllbGQub25lbnRlciAmJiBmaWVsZC5vbikge1xuICAgICAgICAgICAgICAgIGZpZWxkLm9uKFwiZW50ZXJcIiwgZnVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICog5p+l6K+i6KGo5qC8XG4gICAgICogQHBhcmFtIGZvcm1FTCDmn6Xor6LmnaHku7booajljZXpgInmi6nlmags5aaCOiNzZWFyY2gtYm94XG4gICAgICogQHBhcmFtIGdyaWQg6KGo5qC85a+56LGhXG4gICAgICovXG4gICAgc2VhcmNoR3JpZDogZnVuY3Rpb24gKGZvcm1FTCwgZ3JpZCkge1xuICAgICAgICB2YXIgcGFyYW0gPSBuZXcgbWluaS5Gb3JtKGZvcm1FTCkuZ2V0RGF0YSgpO1xuICAgICAgICB2YXIgcmVxdWVzdCA9IHJlcXVpcmUoXCJyZXF1ZXN0XCIpO1xuICAgICAgICBncmlkLmxvYWQocmVxdWVzdC5lbmNvZGVRdWVyeVBhcmFtKHBhcmFtKSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDlvJXlhaXkuIDkuKrmj5Lku7ZcbiAgICAgKi9cbiAgICBpbXBvcnRQbHVnaW46IGltcG9ydFBsdWdpbixcbiAgICAvKipcbiAgICAgKiDlvJXlhaVtaW5pdWlcbiAgICAgKi9cbiAgICBsb2FkTWluaXVpOiBsb2FkTWluaXVpLFxuICAgIC8qKlxuICAgICAqIOaJk+W8gOeql+WPo1xuICAgICAqL1xuICAgIG9wZW5XaW5kb3c6IG9wZW5XaW5kb3csXG4gICAgLyoqXG4gICAgICog5pi+56S65raI5oGv5o+Q56S6XG4gICAgICovXG4gICAgc2hvd1RpcHM6IHNob3dUaXBzLFxuICAgIC8qKlxuICAgICAqIOWFs+mXreeql+WPo+W5tui/lOWbnuaVsOaNrlxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICogQHJldHVybnMgeyp9XG4gICAgICovXG4gICAgY2xvc2VXaW5kb3c6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmICh3aW5kb3cuQ2xvc2VPd25lcldpbmRvdykgcmV0dXJuIHdpbmRvdy5DbG9zZU93bmVyV2luZG93KGRhdGEpO1xuICAgICAgICBlbHNlIHdpbmRvdy5jbG9zZSgpO1xuICAgIH0sXG4gICAgc2hvd0Zvcm1FcnJvcnM6IGZ1bmN0aW9uIChmb3JtRWwsIHJlc3VsdCkge1xuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlO1xuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gbWluaS5kZWNvZGUocmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAkKGVycm9yTWVzc2FnZSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gbWluaS5nZXRieU5hbWUodGhpcy5maWVsZCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLnNldElzVmFsaWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZC5zZXRFcnJvclRleHQodGhpcy5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICog5Yid5aeL5YyW6KGo5qC85a+56LGhLOS/ruaUueWFtum7mOiupOmFjee9rizku6XpgILphY3lkI7lj7BhcGlcbiAgICAgKiBAcGFyYW0gZ3JpZCDooajmoLzlr7nosaFcbiAgICAgKi9cbiAgICBpbml0R3JpZDogZnVuY3Rpb24gKGdyaWQpIHtcbiAgICAgICAgZ3JpZC5zZXRTb3J0RmllbGRGaWVsZChcInNvcnRzWzBdLm5hbWVcIik7XG4gICAgICAgIGdyaWQuc2V0U29ydE9yZGVyRmllbGQoXCJzb3J0c1swXS5kaXJcIik7XG4gICAgICAgIC8v5ZCO5Y+w5ZON5bqU5pWw5o2u5qC85byPXG4gICAgICAgIGdyaWQuc2V0RGF0YUZpZWxkKFwicmVzdWx0LmRhdGFcIik7XG4gICAgICAgIGdyaWQuc2V0VG90YWxGaWVsZChcInJlc3VsdC50b3RhbFwiKTtcbiAgICAgICAgZ3JpZC5hbGxvd0FsdGVybmF0aW5nID0gdHJ1ZTtcbiAgICAgICAgLy/mn6Xor6Llhajpg6jkuLpHRVRcbiAgICAgICAgZ3JpZC5zZXRBamF4T3B0aW9ucyh7XG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiXG4gICAgICAgIH0pO1xuICAgICAgICBncmlkLnVuKFwibG9hZGVycm9yXCIsXG4gICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vIOino+WGs+W8ueWHuumAieaLqeaOp+S7tueahGJ1Z1xuICAgICAgICBncmlkLm9uKFwiY2VsbGJlZ2luZWRpdFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUuZWRpdG9yICYmIGUuZWRpdG9yLnR5cGUgPT0gXCJidXR0b25lZGl0XCIpIHtcbiAgICAgICAgICAgICAgICBlLmVkaXRvci5zZXRWYWx1ZShlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBlLmVkaXRvci5zZXRUZXh0KGUudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy/liqDovb3lpLHotKXov5vooYzmj5DnpLpcbiAgICAgICAgZ3JpZC5vbihcImxvYWRlcnJvclwiLFxuICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gbWluaS5kZWNvZGUoZS54aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmRvTG9naW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZG9Mb2dpbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQucmVsb2FkKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHdpbmRvdy50b3AuZG9Mb2dpbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy50b3AuZG9Mb2dpbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQucmVsb2FkKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dUaXBzKFwi6K+355m75b2VXCIsIFwiZGFuZ2VyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLnN0YXR1cyA9PSA0MDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dUaXBzKFwi5p2D6ZmQ5LiN5aSfXCIsIFwiZGFuZ2VyXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5zdGF0dXMgPT0gNTAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93VGlwcyhcIuaVsOaNruWKoOi9veWksei0pTpcIiArIHJlcy5tZXNzYWdlLCBcImRhbmdlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuY29uc29sZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhyZXMubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93VGlwcyhcIuaVsOaNruWKoOi9veWksei0pTpcIiArIHJlcy5tZXNzYWdlLCBcImRhbmdlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd1RpcHMoXCLliqDovb3lpLHotKUuLi5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHRpcCA9IG5ldyBtaW5pLlRvb2xUaXAoKTtcbiAgICAgICAgdGlwLnNldCh7XG4gICAgICAgICAgICB0YXJnZXQ6IGRvY3VtZW50LFxuICAgICAgICAgICAgc2VsZWN0b3I6ICcuYWN0aW9uLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBjcmVhdGVBY3Rpb25CdXR0b246IGZ1bmN0aW9uICh0aXRsZSwgaWNvbiwgb25jbGljaykge1xuICAgICAgICBpZiAoIXdpbmRvdy5hY3Rpb25fY291bnR0ZXIpd2luZG93LmFjdGlvbl9jb3VudHRlciA9IDA7XG4gICAgICAgIHZhciBjYWxsSWQgPSBcImFjdGlvbl9cIiArICgrK3dpbmRvdy5hY3Rpb25fY291bnR0ZXIpO1xuICAgICAgICB3aW5kb3dbY2FsbElkXSA9IG9uY2xpY2s7XG4gICAgICAgIHJldHVybiBbXCI8c3BhblwiLCBcIiBvbmNsaWNrPSdcIiwgY2FsbElkLCBcIigpJ1wiLCBcIiB0aXRsZT0nXCIsIHRpdGxlLCBcIidcIiwgXCIgY2xhc3M9J2FjdGlvbi1idXR0b24gXCIsIGljb24sIFwiJ1wiLCBcIj48L3NwYW4+XCJdLmpvaW4oXCJcIik7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDmmL7npLrliqDovb3kuK3mj5DnpLpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSDmj5DnpLrnmoTmtojmga9cbiAgICAgKiBAcmV0dXJucyB7e2Nsb3NlOiBoaWRlLGhpZGU6aGlkZX19IOWFs+mXreaYvuekuueahOWbnuiwgyzosIPnlKhjbG9zZeWSjGhpZGXpg73lj6/ku6VcbiAgICAgKi9cbiAgICBsb2FkaW5nOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICBtaW5pLm1hc2soe1xuICAgICAgICAgICAgZWw6IGRvY3VtZW50LmJvZHksXG4gICAgICAgICAgICBjbHM6ICdtaW5pLW1hc2stbG9hZGluZycsXG4gICAgICAgICAgICBodG1sOiBtZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBoaWRlKCkge1xuICAgICAgICAgICAgbWluaS51bm1hc2soZG9jdW1lbnQuYm9keSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xvc2U6IGhpZGUsXG4gICAgICAgICAgICBoaWRlOiBoaWRlXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBnZXRDb29raWU6IGdldENvb2tpZSxcbiAgICBnZXRGb3JtRGF0YTogZnVuY3Rpb24gKGZvcm1FbCwgdmFsaWRhdGUpIHtcbiAgICAgICAgdmFyIGZvcm0gPSBuZXcgbWluaS5Gb3JtKGZvcm1FbCk7XG4gICAgICAgIGZvcm0udmFsaWRhdGUoKTtcbiAgICAgICAgaWYgKHZhbGlkYXRlICYmIGZvcm0uaXNWYWxpZCgpID09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcm0uZ2V0RGF0YSgpO1xuICAgIH1cbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9ib290LmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIDIgMyA0IDUgNiA3IDggOSAxMCAxMSAxMiAxMyAxNCAxNSJdLCJzb3VyY2VSb290IjoiIn0=')},10:function(module,exports){eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcm9sZS9zYXZlLmNzcz8zYjM3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjEwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9yb2xlL3NhdmUuY3NzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9")},2:function(module,exports){eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9ucy9jb21tb24uY3NzPzQzMDMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tbW9ucy9jb21tb24uY3NzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIDIgMyA0IDUgNiA3IDggMTAgMTEgMTIgMTMiXSwic291cmNlUm9vdCI6IiJ9")},23:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('Object.defineProperty(__webpack_exports__, "__esModule", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_boot__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_boot___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_boot__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_request__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_request___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_request__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_common_common_css__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_common_common_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_common_common_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__save_css__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__save_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__save_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_script_editor__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_script_editor___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__utils_script_editor__);\n\n\n\n\n\n\nvar permissions = {};\nwindow.dataAccessesType = [\n    {text: "只能操作自己创建的数据", id: "OWN_CREATED"},\n    // {text: "脚本", id: "SCRIPT"},\n    {text: "自定义控制器", id: "CUSTOM"}\n    // {text: "自定义控制器", id: "CUSTOM"},\n];\nwindow.renderOperationAction = function (e) {\n    if (!e.value)return "";\n    var row = e.record;\n    var strVal = e.value + "";\n    var arr = strVal.split(",");\n    var text = [];\n    var permission = permissions[row.permissionId];\n    if (permission) {\n        var actionMap = permission.actionsMap;\n        if (!actionMap) {\n            permission.actionsMap = actionMap = {};\n            $(permission.actions).each(function () {\n                actionMap[this.action] = this;\n            });\n        }\n        $(arr).each(function () {\n            text.push(actionMap[this] ? (actionMap[this].describe ? actionMap[this].describe : actionMap[this].action) : this);\n        });\n    }\n    return text.join(",");\n}\nwindow.renderFields = function (e) {\n    if (!e.value)return "";\n    var strVal = e.value + "";\n    var arr = strVal.split(",");\n    var text = [];\n    var permission = window.nowSelectPermission;\n    if (permission) {\n        var fieldsMap = permission.fieldsMap;\n        if (!fieldsMap) {\n            permission.fieldsMap = fieldsMap = {};\n            $(permission.optionalFields).each(function () {\n                fieldsMap[this.name] = this;\n            });\n        }\n        $(arr).each(function () {\n            text.push(fieldsMap[this] ? (fieldsMap[this].describe ? fieldsMap[this].describe : fieldsMap[this].name) : this);\n        });\n    }\n    return text.join(",");\n}\nwindow.renderDataAccess = function (e) {\n    var text = [];\n    $(e.value).each(function () {\n        text.push(this.describe ? this.describe : this.type);\n    });\n    return text.join(",");\n};\nwindow.renderAction = function (e) {\n    let row = e.record;\n    return [\n        __WEBPACK_IMPORTED_MODULE_0_boot___default.a.createActionButton("删除", "icon-remove", function () {\n            e.sender.removeRow(row);\n        })\n    ].join("");\n}\nwindow.rendererTrueFalse = function (e) {\n    return e.value ? "是" : "否";\n}\nwindow.openScript = function (e) {\n    var grid = mini.get(\'data-accesses-grid\');\n    var cell = grid.getCurrentCell();\n    var row = cell[0];\n    if (row.type == "OWN_CREATED") {\n        e.sender.emptyText = "此类型无需配置";\n    } else if (row.type == "SCRIPT") {\n        var lang_box = mini.getbyName("script-language");\n        lang_box.un("valuechanged");\n        var old = e.sender.getValue();\n        if (!old) {\n            old = mini.encode({"language": "javascript", "script": ""});\n        }\n        old = mini.decode(old);\n        __WEBPACK_IMPORTED_MODULE_4__utils_script_editor___default.a.createEditor("editor", function (editor) {\n            lang_box.on("valuechanged", function () {\n                editor.init(lang_box.getValue(), editor.getScript())\n            });\n\n            editor.init(old.language, old.script);\n            mini.get(\'scriptEditorWindow\').show();\n            $(".script-ok").click(function () {\n                var script = editor.getScript();\n                mini.get(\'scriptEditorWindow\').hide();\n                cell[0][cell[1].field] = mini.encode({"script": script, "language": lang_box.getValue()});\n                grid.updateRow(cell[0]);\n            });\n        });\n    } else {\n        e.sender.emptyText = "请输入类全名或spring bean name";\n    }\n}\n\nfunction loadData(id) {\n    var loading = __WEBPACK_IMPORTED_MODULE_0_boot___default.a.loading("加载中...");\n    __WEBPACK_IMPORTED_MODULE_1_request___default.a.get("permission", {paging: false}, function (res) {\n        if (res.status == 200) {\n            $(res.result.data).each(function () {\n                permissions[this.id] = this;\n            });\n        }\n        __WEBPACK_IMPORTED_MODULE_1_request___default.a.get("role/" + id + "/detail", function (response) {\n            loading.hide();\n            if (response.status == 200) {\n                new mini.Form("#basic-info").setData(response.result);\n                mini.getbyName("id").setReadOnly(true);\n                mini.get(\'action-grid\').setData(response.result.permissions);\n                $(response.result.permissions).each(function () {\n                    this.actions = this.actions + "";\n                })\n            } else {\n                __WEBPACK_IMPORTED_MODULE_0_boot___default.a.showTips("加载数据失败", "danger");\n            }\n        });\n    });\n\n}\nfunction getDataAndValidate() {\n    var form = new mini.Form("#basic-info");\n    form.validate();\n    if (form.isValid() == false) {\n\n        return;\n    }\n    var data = form.getData();\n    data.permissions = mini.clone(mini.get(\'action-grid\').getData());\n    $(data.permissions).each(function () {\n        this.actions = this.actions.split(",");\n    })\n    // data.dataAccess = mini.get(\'data-accesses-grid\').getData();\n    // data.optionalFields = mini.clone(mini.get(\'field-accesses-grid\').getData());\n    // $(data.optionalFields).each(function () {\n    //     if (this.actions)\n    //         this.actions = this.actions.split(",");\n    // });\n    return data;\n}\nfunction initActionsEditor(grid) {\n    grid.on("cellbeginedit", function (e) {\n        var row = e.record;\n        if (!row.permissionId) {\n            __WEBPACK_IMPORTED_MODULE_0_boot___default.a.showTips("请先设置权限ID");\n            return;\n        }\n        var permission = permissions[row.permissionId];\n        if (!permission) {\n            __WEBPACK_IMPORTED_MODULE_0_boot___default.a.showTips("权限不存在,请检查权限ID是否正确!");\n            return;\n        }\n        window.deny_fields_data = permission ? permission.actions : [];\n        window.nowSelectPermission = permission;\n        if (e.field == "actions") {\n            mini.get("actionsBox").setData(window.deny_fields_data);\n        }\n        if (e.field == "dataAccesses") {\n            if (!row.actions) {\n                __WEBPACK_IMPORTED_MODULE_0_boot___default.a.showTips("请先设置可操作类型!");\n                return;\n            }\n            var own_create_html = {};\n            $(row.actions.split(",")).each(function () {\n                var action = permission.actionsMap[this];\n                if (!action)return;\n                own_create_html[this] = $("<span style=\'cursor: pointer\'></span>");\n                var box = $("<input type=\'checkbox\' name=\'own_create_box\'>").val(this)\n                    .attr("describe", action.describe ? ("只能" + action.describe + "自己创建的数据") : "");\n                own_create_html[this]\n                    .append(box)\n                    .append(\n                        $("<span>")\n                            .text(action.describe ? action.describe : action.action)\n                            .on("click", function () {\n                                box.prop("checked", !box.prop("checked"))\n                            }));\n            });\n\n            window.permission_actions = permission ? permission.optionalFields : [];\n            if (mini.get("denyActionsBox"))\n                mini.get("denyActionsBox").setData(permission_actions);\n            if (mini.get("denyFieldsBox"))\n                mini.get("denyFieldsBox").setData(window.deny_fields_data);\n\n            var gridData = [];\n\n            $(mini.clone(row.dataAccesses)).each(function () {\n                if (this.type == "DENY_FIELDS") {\n                    this.config = mini.decode(this.config);\n                    this.config.fields = this.config.fields + "";\n                    this.permissionId = row.permissionId;\n                    gridData.push(this);\n                }\n                if (this.type == "OWN_CREATED") {\n                    if (own_create_html[this.action]) {\n                        own_create_html[this.action].find("input").prop("checked", true);\n                    }\n                }\n            });\n            $(\'.action_box\').html("");\n            for (var action in own_create_html) {\n                $(\'.action_box\').each(function () {\n                    $(this).append(own_create_html[action].clone());\n                });\n            }\n            mini.get("deny_fields_grid").setData(gridData);\n\n            window.onDataAccessEditAfter = function () {\n                var all_config = [];\n                $("[name=own_create_box]:checked").each(function () {\n                    all_config.push({describe: $(this).attr("describe"), action: $(this).val(), type: "OWN_CREATED"});\n                });\n                var deny_fields = mini.clone(mini.get("deny_fields_grid").getData());\n                $(deny_fields).each(function () {\n                    this.type = "DENY_FIELDS";\n                    this.config = mini.encode(this.config);\n                    if (this.action) {\n                        all_config.push(this);\n                    }\n                });\n                grid.updateRow(row, {dataAccesses: all_config});\n                mini.get("dataAccessWindow").hide();\n            }\n            mini.get("dataAccessWindow").show();\n        }\n    });\n    grid.on("cellcommitedit", function (e) {\n        var record = e.record;\n        if (e.field == \'config\') {\n            if (e.editor) {\n                if (e.editor.getValue) {\n                    record.config = e.editor.getValue();\n                }\n            }\n        }\n    });\n}\n\n__WEBPACK_IMPORTED_MODULE_0_boot___default.a.loadMiniui(function () {\n    mini.parse();\n    mini.getbyName("id").on("validation", function (e) {\n        if (e.isValid) {\n            var re = new RegExp("^[a-zA-Z0-9_\\-]+$");\n            e.isValid = re.test(e.value);\n            if (!e.isValid) {\n                e.errorText = "必须由数字,字母,下划线,-组成";\n            }\n        }\n    });\n    // mini.get("data-accesses-grid").setData([{}]);\n    // boot.initGrid(mini.get("data-accesses-grid"));\n    __WEBPACK_IMPORTED_MODULE_0_boot___default.a.initGrid(mini.get("action-grid"));\n    initActionsEditor(mini.get(\'action-grid\'));\n\n    var api = "role";\n    var func = __WEBPACK_IMPORTED_MODULE_1_request___default.a.post;\n\n    var id = __WEBPACK_IMPORTED_MODULE_1_request___default.a.getParameter("id");\n    if (id) {\n        loadData(id);\n        api += "/" + id;\n        func = __WEBPACK_IMPORTED_MODULE_1_request___default.a.put;\n    }\n    $(".save-button").on("click", (function () {\n        var data = getDataAndValidate();\n        if (!data)return;\n        var loading = __WEBPACK_IMPORTED_MODULE_0_boot___default.a.loading("提交中");\n        func(api, data, function (response) {\n            loading.close();\n            if (response.status == 200) {\n                __WEBPACK_IMPORTED_MODULE_0_boot___default.a.showTips("保存成功");\n                if (!id)id = response.result;\n            } else {\n                __WEBPACK_IMPORTED_MODULE_0_boot___default.a.showTips("保存失败:" + response.message, "danger");\n                if (response.result)\n                    __WEBPACK_IMPORTED_MODULE_0_boot___default.a.showFormErrors("#basic-info", response.result);\n            }\n        })\n    }));\n\n    $(".data-access-edit-ok").on("click", function () {\n        window.onDataAccessEditAfter();\n    });\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcm9sZS9zYXZlLmpzPzIzZjEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLLHVDQUF1QztBQUM1QyxRQUFRLHlCQUF5QjtBQUNqQyxLQUFLO0FBQ0wsUUFBUSw2QkFBNkI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHVDQUF1QztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELGtEQUFrRDtBQUN4RztBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUVBQStCLGNBQWM7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QixhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLCtFQUErRTtBQUNwSCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIscUNBQXFDLHlCQUF5QjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQyIsImZpbGUiOiIyMy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBib290IGZyb20gXCJib290XCI7XG5pbXBvcnQgcmVxdWVzdCBmcm9tIFwicmVxdWVzdFwiO1xuaW1wb3J0IFwiY29tbW9uL2NvbW1vbi5jc3NcIjtcbmltcG9ydCBcIi4vc2F2ZS5jc3NcIjtcbmltcG9ydCBzY3JpcHRFZGl0b3IgZnJvbSBcIi4uL3V0aWxzL3NjcmlwdC1lZGl0b3JcIjtcblxudmFyIHBlcm1pc3Npb25zID0ge307XG53aW5kb3cuZGF0YUFjY2Vzc2VzVHlwZSA9IFtcbiAgICB7dGV4dDogXCLlj6rog73mk43kvZzoh6rlt7HliJvlu7rnmoTmlbDmja5cIiwgaWQ6IFwiT1dOX0NSRUFURURcIn0sXG4gICAgLy8ge3RleHQ6IFwi6ISa5pysXCIsIGlkOiBcIlNDUklQVFwifSxcbiAgICB7dGV4dDogXCLoh6rlrprkuYnmjqfliLblmahcIiwgaWQ6IFwiQ1VTVE9NXCJ9XG4gICAgLy8ge3RleHQ6IFwi6Ieq5a6a5LmJ5o6n5Yi25ZmoXCIsIGlkOiBcIkNVU1RPTVwifSxcbl07XG53aW5kb3cucmVuZGVyT3BlcmF0aW9uQWN0aW9uID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoIWUudmFsdWUpcmV0dXJuIFwiXCI7XG4gICAgdmFyIHJvdyA9IGUucmVjb3JkO1xuICAgIHZhciBzdHJWYWwgPSBlLnZhbHVlICsgXCJcIjtcbiAgICB2YXIgYXJyID0gc3RyVmFsLnNwbGl0KFwiLFwiKTtcbiAgICB2YXIgdGV4dCA9IFtdO1xuICAgIHZhciBwZXJtaXNzaW9uID0gcGVybWlzc2lvbnNbcm93LnBlcm1pc3Npb25JZF07XG4gICAgaWYgKHBlcm1pc3Npb24pIHtcbiAgICAgICAgdmFyIGFjdGlvbk1hcCA9IHBlcm1pc3Npb24uYWN0aW9uc01hcDtcbiAgICAgICAgaWYgKCFhY3Rpb25NYXApIHtcbiAgICAgICAgICAgIHBlcm1pc3Npb24uYWN0aW9uc01hcCA9IGFjdGlvbk1hcCA9IHt9O1xuICAgICAgICAgICAgJChwZXJtaXNzaW9uLmFjdGlvbnMpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGFjdGlvbk1hcFt0aGlzLmFjdGlvbl0gPSB0aGlzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgJChhcnIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGV4dC5wdXNoKGFjdGlvbk1hcFt0aGlzXSA/IChhY3Rpb25NYXBbdGhpc10uZGVzY3JpYmUgPyBhY3Rpb25NYXBbdGhpc10uZGVzY3JpYmUgOiBhY3Rpb25NYXBbdGhpc10uYWN0aW9uKSA6IHRoaXMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRleHQuam9pbihcIixcIik7XG59XG53aW5kb3cucmVuZGVyRmllbGRzID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoIWUudmFsdWUpcmV0dXJuIFwiXCI7XG4gICAgdmFyIHN0clZhbCA9IGUudmFsdWUgKyBcIlwiO1xuICAgIHZhciBhcnIgPSBzdHJWYWwuc3BsaXQoXCIsXCIpO1xuICAgIHZhciB0ZXh0ID0gW107XG4gICAgdmFyIHBlcm1pc3Npb24gPSB3aW5kb3cubm93U2VsZWN0UGVybWlzc2lvbjtcbiAgICBpZiAocGVybWlzc2lvbikge1xuICAgICAgICB2YXIgZmllbGRzTWFwID0gcGVybWlzc2lvbi5maWVsZHNNYXA7XG4gICAgICAgIGlmICghZmllbGRzTWFwKSB7XG4gICAgICAgICAgICBwZXJtaXNzaW9uLmZpZWxkc01hcCA9IGZpZWxkc01hcCA9IHt9O1xuICAgICAgICAgICAgJChwZXJtaXNzaW9uLm9wdGlvbmFsRmllbGRzKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBmaWVsZHNNYXBbdGhpcy5uYW1lXSA9IHRoaXM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAkKGFycikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0ZXh0LnB1c2goZmllbGRzTWFwW3RoaXNdID8gKGZpZWxkc01hcFt0aGlzXS5kZXNjcmliZSA/IGZpZWxkc01hcFt0aGlzXS5kZXNjcmliZSA6IGZpZWxkc01hcFt0aGlzXS5uYW1lKSA6IHRoaXMpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRleHQuam9pbihcIixcIik7XG59XG53aW5kb3cucmVuZGVyRGF0YUFjY2VzcyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHRleHQgPSBbXTtcbiAgICAkKGUudmFsdWUpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB0ZXh0LnB1c2godGhpcy5kZXNjcmliZSA/IHRoaXMuZGVzY3JpYmUgOiB0aGlzLnR5cGUpO1xuICAgIH0pO1xuICAgIHJldHVybiB0ZXh0LmpvaW4oXCIsXCIpO1xufTtcbndpbmRvdy5yZW5kZXJBY3Rpb24gPSBmdW5jdGlvbiAoZSkge1xuICAgIGxldCByb3cgPSBlLnJlY29yZDtcbiAgICByZXR1cm4gW1xuICAgICAgICBib290LmNyZWF0ZUFjdGlvbkJ1dHRvbihcIuWIoOmZpFwiLCBcImljb24tcmVtb3ZlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGUuc2VuZGVyLnJlbW92ZVJvdyhyb3cpO1xuICAgICAgICB9KVxuICAgIF0uam9pbihcIlwiKTtcbn1cbndpbmRvdy5yZW5kZXJlclRydWVGYWxzZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgcmV0dXJuIGUudmFsdWUgPyBcIuaYr1wiIDogXCLlkKZcIjtcbn1cbndpbmRvdy5vcGVuU2NyaXB0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgZ3JpZCA9IG1pbmkuZ2V0KCdkYXRhLWFjY2Vzc2VzLWdyaWQnKTtcbiAgICB2YXIgY2VsbCA9IGdyaWQuZ2V0Q3VycmVudENlbGwoKTtcbiAgICB2YXIgcm93ID0gY2VsbFswXTtcbiAgICBpZiAocm93LnR5cGUgPT0gXCJPV05fQ1JFQVRFRFwiKSB7XG4gICAgICAgIGUuc2VuZGVyLmVtcHR5VGV4dCA9IFwi5q2k57G75Z6L5peg6ZyA6YWN572uXCI7XG4gICAgfSBlbHNlIGlmIChyb3cudHlwZSA9PSBcIlNDUklQVFwiKSB7XG4gICAgICAgIHZhciBsYW5nX2JveCA9IG1pbmkuZ2V0YnlOYW1lKFwic2NyaXB0LWxhbmd1YWdlXCIpO1xuICAgICAgICBsYW5nX2JveC51bihcInZhbHVlY2hhbmdlZFwiKTtcbiAgICAgICAgdmFyIG9sZCA9IGUuc2VuZGVyLmdldFZhbHVlKCk7XG4gICAgICAgIGlmICghb2xkKSB7XG4gICAgICAgICAgICBvbGQgPSBtaW5pLmVuY29kZSh7XCJsYW5ndWFnZVwiOiBcImphdmFzY3JpcHRcIiwgXCJzY3JpcHRcIjogXCJcIn0pO1xuICAgICAgICB9XG4gICAgICAgIG9sZCA9IG1pbmkuZGVjb2RlKG9sZCk7XG4gICAgICAgIHNjcmlwdEVkaXRvci5jcmVhdGVFZGl0b3IoXCJlZGl0b3JcIiwgZnVuY3Rpb24gKGVkaXRvcikge1xuICAgICAgICAgICAgbGFuZ19ib3gub24oXCJ2YWx1ZWNoYW5nZWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGVkaXRvci5pbml0KGxhbmdfYm94LmdldFZhbHVlKCksIGVkaXRvci5nZXRTY3JpcHQoKSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBlZGl0b3IuaW5pdChvbGQubGFuZ3VhZ2UsIG9sZC5zY3JpcHQpO1xuICAgICAgICAgICAgbWluaS5nZXQoJ3NjcmlwdEVkaXRvcldpbmRvdycpLnNob3coKTtcbiAgICAgICAgICAgICQoXCIuc2NyaXB0LW9rXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2NyaXB0ID0gZWRpdG9yLmdldFNjcmlwdCgpO1xuICAgICAgICAgICAgICAgIG1pbmkuZ2V0KCdzY3JpcHRFZGl0b3JXaW5kb3cnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgY2VsbFswXVtjZWxsWzFdLmZpZWxkXSA9IG1pbmkuZW5jb2RlKHtcInNjcmlwdFwiOiBzY3JpcHQsIFwibGFuZ3VhZ2VcIjogbGFuZ19ib3guZ2V0VmFsdWUoKX0pO1xuICAgICAgICAgICAgICAgIGdyaWQudXBkYXRlUm93KGNlbGxbMF0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGUuc2VuZGVyLmVtcHR5VGV4dCA9IFwi6K+36L6T5YWl57G75YWo5ZCN5oiWc3ByaW5nIGJlYW4gbmFtZVwiO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbG9hZERhdGEoaWQpIHtcbiAgICB2YXIgbG9hZGluZyA9IGJvb3QubG9hZGluZyhcIuWKoOi9veS4rS4uLlwiKTtcbiAgICByZXF1ZXN0LmdldChcInBlcm1pc3Npb25cIiwge3BhZ2luZzogZmFsc2V9LCBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgJChyZXMucmVzdWx0LmRhdGEpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHBlcm1pc3Npb25zW3RoaXMuaWRdID0gdGhpcztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJlcXVlc3QuZ2V0KFwicm9sZS9cIiArIGlkICsgXCIvZGV0YWlsXCIsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgbG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgIG5ldyBtaW5pLkZvcm0oXCIjYmFzaWMtaW5mb1wiKS5zZXREYXRhKHJlc3BvbnNlLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgbWluaS5nZXRieU5hbWUoXCJpZFwiKS5zZXRSZWFkT25seSh0cnVlKTtcbiAgICAgICAgICAgICAgICBtaW5pLmdldCgnYWN0aW9uLWdyaWQnKS5zZXREYXRhKHJlc3BvbnNlLnJlc3VsdC5wZXJtaXNzaW9ucyk7XG4gICAgICAgICAgICAgICAgJChyZXNwb25zZS5yZXN1bHQucGVybWlzc2lvbnMpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnMgPSB0aGlzLmFjdGlvbnMgKyBcIlwiO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJvb3Quc2hvd1RpcHMoXCLliqDovb3mlbDmja7lpLHotKVcIiwgXCJkYW5nZXJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59XG5mdW5jdGlvbiBnZXREYXRhQW5kVmFsaWRhdGUoKSB7XG4gICAgdmFyIGZvcm0gPSBuZXcgbWluaS5Gb3JtKFwiI2Jhc2ljLWluZm9cIik7XG4gICAgZm9ybS52YWxpZGF0ZSgpO1xuICAgIGlmIChmb3JtLmlzVmFsaWQoKSA9PSBmYWxzZSkge1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGRhdGEgPSBmb3JtLmdldERhdGEoKTtcbiAgICBkYXRhLnBlcm1pc3Npb25zID0gbWluaS5jbG9uZShtaW5pLmdldCgnYWN0aW9uLWdyaWQnKS5nZXREYXRhKCkpO1xuICAgICQoZGF0YS5wZXJtaXNzaW9ucykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYWN0aW9ucyA9IHRoaXMuYWN0aW9ucy5zcGxpdChcIixcIik7XG4gICAgfSlcbiAgICAvLyBkYXRhLmRhdGFBY2Nlc3MgPSBtaW5pLmdldCgnZGF0YS1hY2Nlc3Nlcy1ncmlkJykuZ2V0RGF0YSgpO1xuICAgIC8vIGRhdGEub3B0aW9uYWxGaWVsZHMgPSBtaW5pLmNsb25lKG1pbmkuZ2V0KCdmaWVsZC1hY2Nlc3Nlcy1ncmlkJykuZ2V0RGF0YSgpKTtcbiAgICAvLyAkKGRhdGEub3B0aW9uYWxGaWVsZHMpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICBpZiAodGhpcy5hY3Rpb25zKVxuICAgIC8vICAgICAgICAgdGhpcy5hY3Rpb25zID0gdGhpcy5hY3Rpb25zLnNwbGl0KFwiLFwiKTtcbiAgICAvLyB9KTtcbiAgICByZXR1cm4gZGF0YTtcbn1cbmZ1bmN0aW9uIGluaXRBY3Rpb25zRWRpdG9yKGdyaWQpIHtcbiAgICBncmlkLm9uKFwiY2VsbGJlZ2luZWRpdFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgcm93ID0gZS5yZWNvcmQ7XG4gICAgICAgIGlmICghcm93LnBlcm1pc3Npb25JZCkge1xuICAgICAgICAgICAgYm9vdC5zaG93VGlwcyhcIuivt+WFiOiuvue9ruadg+mZkElEXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwZXJtaXNzaW9uID0gcGVybWlzc2lvbnNbcm93LnBlcm1pc3Npb25JZF07XG4gICAgICAgIGlmICghcGVybWlzc2lvbikge1xuICAgICAgICAgICAgYm9vdC5zaG93VGlwcyhcIuadg+mZkOS4jeWtmOWcqCzor7fmo4Dmn6XmnYPpmZBJROaYr+WQpuato+ehriFcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93LmRlbnlfZmllbGRzX2RhdGEgPSBwZXJtaXNzaW9uID8gcGVybWlzc2lvbi5hY3Rpb25zIDogW107XG4gICAgICAgIHdpbmRvdy5ub3dTZWxlY3RQZXJtaXNzaW9uID0gcGVybWlzc2lvbjtcbiAgICAgICAgaWYgKGUuZmllbGQgPT0gXCJhY3Rpb25zXCIpIHtcbiAgICAgICAgICAgIG1pbmkuZ2V0KFwiYWN0aW9uc0JveFwiKS5zZXREYXRhKHdpbmRvdy5kZW55X2ZpZWxkc19kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5maWVsZCA9PSBcImRhdGFBY2Nlc3Nlc1wiKSB7XG4gICAgICAgICAgICBpZiAoIXJvdy5hY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgYm9vdC5zaG93VGlwcyhcIuivt+WFiOiuvue9ruWPr+aTjeS9nOexu+WeiyFcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG93bl9jcmVhdGVfaHRtbCA9IHt9O1xuICAgICAgICAgICAgJChyb3cuYWN0aW9ucy5zcGxpdChcIixcIikpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSBwZXJtaXNzaW9uLmFjdGlvbnNNYXBbdGhpc107XG4gICAgICAgICAgICAgICAgaWYgKCFhY3Rpb24pcmV0dXJuO1xuICAgICAgICAgICAgICAgIG93bl9jcmVhdGVfaHRtbFt0aGlzXSA9ICQoXCI8c3BhbiBzdHlsZT0nY3Vyc29yOiBwb2ludGVyJz48L3NwYW4+XCIpO1xuICAgICAgICAgICAgICAgIHZhciBib3ggPSAkKFwiPGlucHV0IHR5cGU9J2NoZWNrYm94JyBuYW1lPSdvd25fY3JlYXRlX2JveCc+XCIpLnZhbCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImRlc2NyaWJlXCIsIGFjdGlvbi5kZXNjcmliZSA/IChcIuWPquiDvVwiICsgYWN0aW9uLmRlc2NyaWJlICsgXCLoh6rlt7HliJvlu7rnmoTmlbDmja5cIikgOiBcIlwiKTtcbiAgICAgICAgICAgICAgICBvd25fY3JlYXRlX2h0bWxbdGhpc11cbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChib3gpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiPHNwYW4+XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoYWN0aW9uLmRlc2NyaWJlID8gYWN0aW9uLmRlc2NyaWJlIDogYWN0aW9uLmFjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC5wcm9wKFwiY2hlY2tlZFwiLCAhYm94LnByb3AoXCJjaGVja2VkXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB3aW5kb3cucGVybWlzc2lvbl9hY3Rpb25zID0gcGVybWlzc2lvbiA/IHBlcm1pc3Npb24ub3B0aW9uYWxGaWVsZHMgOiBbXTtcbiAgICAgICAgICAgIGlmIChtaW5pLmdldChcImRlbnlBY3Rpb25zQm94XCIpKVxuICAgICAgICAgICAgICAgIG1pbmkuZ2V0KFwiZGVueUFjdGlvbnNCb3hcIikuc2V0RGF0YShwZXJtaXNzaW9uX2FjdGlvbnMpO1xuICAgICAgICAgICAgaWYgKG1pbmkuZ2V0KFwiZGVueUZpZWxkc0JveFwiKSlcbiAgICAgICAgICAgICAgICBtaW5pLmdldChcImRlbnlGaWVsZHNCb3hcIikuc2V0RGF0YSh3aW5kb3cuZGVueV9maWVsZHNfZGF0YSk7XG5cbiAgICAgICAgICAgIHZhciBncmlkRGF0YSA9IFtdO1xuXG4gICAgICAgICAgICAkKG1pbmkuY2xvbmUocm93LmRhdGFBY2Nlc3NlcykpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT0gXCJERU5ZX0ZJRUxEU1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnID0gbWluaS5kZWNvZGUodGhpcy5jb25maWcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5maWVsZHMgPSB0aGlzLmNvbmZpZy5maWVsZHMgKyBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcm1pc3Npb25JZCA9IHJvdy5wZXJtaXNzaW9uSWQ7XG4gICAgICAgICAgICAgICAgICAgIGdyaWREYXRhLnB1c2godGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT0gXCJPV05fQ1JFQVRFRFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvd25fY3JlYXRlX2h0bWxbdGhpcy5hY3Rpb25dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvd25fY3JlYXRlX2h0bWxbdGhpcy5hY3Rpb25dLmZpbmQoXCJpbnB1dFwiKS5wcm9wKFwiY2hlY2tlZFwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnLmFjdGlvbl9ib3gnKS5odG1sKFwiXCIpO1xuICAgICAgICAgICAgZm9yICh2YXIgYWN0aW9uIGluIG93bl9jcmVhdGVfaHRtbCkge1xuICAgICAgICAgICAgICAgICQoJy5hY3Rpb25fYm94JykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYXBwZW5kKG93bl9jcmVhdGVfaHRtbFthY3Rpb25dLmNsb25lKCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWluaS5nZXQoXCJkZW55X2ZpZWxkc19ncmlkXCIpLnNldERhdGEoZ3JpZERhdGEpO1xuXG4gICAgICAgICAgICB3aW5kb3cub25EYXRhQWNjZXNzRWRpdEFmdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhbGxfY29uZmlnID0gW107XG4gICAgICAgICAgICAgICAgJChcIltuYW1lPW93bl9jcmVhdGVfYm94XTpjaGVja2VkXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBhbGxfY29uZmlnLnB1c2goe2Rlc2NyaWJlOiAkKHRoaXMpLmF0dHIoXCJkZXNjcmliZVwiKSwgYWN0aW9uOiAkKHRoaXMpLnZhbCgpLCB0eXBlOiBcIk9XTl9DUkVBVEVEXCJ9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgZGVueV9maWVsZHMgPSBtaW5pLmNsb25lKG1pbmkuZ2V0KFwiZGVueV9maWVsZHNfZ3JpZFwiKS5nZXREYXRhKCkpO1xuICAgICAgICAgICAgICAgICQoZGVueV9maWVsZHMpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBcIkRFTllfRklFTERTXCI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnID0gbWluaS5lbmNvZGUodGhpcy5jb25maWcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbF9jb25maWcucHVzaCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGdyaWQudXBkYXRlUm93KHJvdywge2RhdGFBY2Nlc3NlczogYWxsX2NvbmZpZ30pO1xuICAgICAgICAgICAgICAgIG1pbmkuZ2V0KFwiZGF0YUFjY2Vzc1dpbmRvd1wiKS5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtaW5pLmdldChcImRhdGFBY2Nlc3NXaW5kb3dcIikuc2hvdygpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgZ3JpZC5vbihcImNlbGxjb21taXRlZGl0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciByZWNvcmQgPSBlLnJlY29yZDtcbiAgICAgICAgaWYgKGUuZmllbGQgPT0gJ2NvbmZpZycpIHtcbiAgICAgICAgICAgIGlmIChlLmVkaXRvcikge1xuICAgICAgICAgICAgICAgIGlmIChlLmVkaXRvci5nZXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZWNvcmQuY29uZmlnID0gZS5lZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuYm9vdC5sb2FkTWluaXVpKGZ1bmN0aW9uICgpIHtcbiAgICBtaW5pLnBhcnNlKCk7XG4gICAgbWluaS5nZXRieU5hbWUoXCJpZFwiKS5vbihcInZhbGlkYXRpb25cIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKGUuaXNWYWxpZCkge1xuICAgICAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cChcIl5bYS16QS1aMC05X1xcLV0rJFwiKTtcbiAgICAgICAgICAgIGUuaXNWYWxpZCA9IHJlLnRlc3QoZS52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoIWUuaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgIGUuZXJyb3JUZXh0ID0gXCLlv4XpobvnlLHmlbDlrZcs5a2X5q+NLOS4i+WIkue6vywt57uE5oiQXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBtaW5pLmdldChcImRhdGEtYWNjZXNzZXMtZ3JpZFwiKS5zZXREYXRhKFt7fV0pO1xuICAgIC8vIGJvb3QuaW5pdEdyaWQobWluaS5nZXQoXCJkYXRhLWFjY2Vzc2VzLWdyaWRcIikpO1xuICAgIGJvb3QuaW5pdEdyaWQobWluaS5nZXQoXCJhY3Rpb24tZ3JpZFwiKSk7XG4gICAgaW5pdEFjdGlvbnNFZGl0b3IobWluaS5nZXQoJ2FjdGlvbi1ncmlkJykpO1xuXG4gICAgdmFyIGFwaSA9IFwicm9sZVwiO1xuICAgIHZhciBmdW5jID0gcmVxdWVzdC5wb3N0O1xuXG4gICAgdmFyIGlkID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoXCJpZFwiKTtcbiAgICBpZiAoaWQpIHtcbiAgICAgICAgbG9hZERhdGEoaWQpO1xuICAgICAgICBhcGkgKz0gXCIvXCIgKyBpZDtcbiAgICAgICAgZnVuYyA9IHJlcXVlc3QucHV0O1xuICAgIH1cbiAgICAkKFwiLnNhdmUtYnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBnZXREYXRhQW5kVmFsaWRhdGUoKTtcbiAgICAgICAgaWYgKCFkYXRhKXJldHVybjtcbiAgICAgICAgdmFyIGxvYWRpbmcgPSBib290LmxvYWRpbmcoXCLmj5DkuqTkuK1cIik7XG4gICAgICAgIGZ1bmMoYXBpLCBkYXRhLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgYm9vdC5zaG93VGlwcyhcIuS/neWtmOaIkOWKn1wiKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlkKWlkID0gcmVzcG9uc2UucmVzdWx0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBib290LnNob3dUaXBzKFwi5L+d5a2Y5aSx6LSlOlwiICsgcmVzcG9uc2UubWVzc2FnZSwgXCJkYW5nZXJcIik7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgYm9vdC5zaG93Rm9ybUVycm9ycyhcIiNiYXNpYy1pbmZvXCIsIHJlc3BvbnNlLnJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSkpO1xuXG4gICAgJChcIi5kYXRhLWFjY2Vzcy1lZGl0LW9rXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cub25EYXRhQWNjZXNzRWRpdEFmdGVyKCk7XG4gICAgfSk7XG59KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9yb2xlL3NhdmUuanNcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=')},3:function(module,exports,__webpack_require__){eval('/**\n * 脚本编辑器初始化工具\n */\nvar boot = __webpack_require__(0);\nvar aceEditor = {};\n\nfunction initAce(el, call) {\n    function justInit() {\n        var langTools = ace.require("ace/ext/language_tools");\n        var editor = ace.edit(el);\n        editor.setTheme("ace/theme/eclipse");\n        aceEditor[el] = {};\n\n        aceEditor[el].setScript = function (script) {\n            if (script) {\n                editor.setValue(script, -1);\n            }\n        }\n        aceEditor[el].getScript = function () {\n            return editor.getValue();\n        }\n        aceEditor[el].init = function (lang, script) {\n            editor.getSession().setMode("ace/mode/" + lang);\n            editor.$blockScrolling = Infinity;\n            editor.setOptions({\n                enableBasicAutocompletion: true,\n                enableSnippets: true,\n                enableLiveAutocompletion: true\n            });\n            editor.setValue(script, -1);\n        }\n        aceEditor[el].setCompleteData = function (data) {\n            langTools.addCompleter({\n                getCompletions: function (editor, session, pos, prefix, callback) {\n                    if (prefix.length === 0) {\n                        return callback(null, []);\n                    } else {\n                        return callback(null, data);\n                    }\n                }\n            });\n        }\n        call(aceEditor[el]);\n    }\n\n    if (!window.ace) {\n        boot.importPlugin("plugins/ace/ace.js", function () {\n            boot.importPlugin("plugins/ace/ext-language_tools.js", function () {\n                justInit();\n            });\n        });\n    } else {\n        justInit();\n    }\n\n}\n\nmodule.exports = {\n    /**\n     * 创建一个编辑器\n     * @param id 编辑器容器ID 如: editor\n     * @param cbk 创建后调用回调 并传入编辑器对象,可调用此对象的 setScript getScript init(language,script)等进行操作\n     */\n    createEditor: function (id, cbk) {\n        if (!aceEditor[id]) {\n            initAce(id, cbk);\n        } else {\n            cbk(aceEditor[id]);\n        }\n    }\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvc2NyaXB0LWVkaXRvci5qcz80ZmI4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog6ISa5pys57yW6L6R5Zmo5Yid5aeL5YyW5bel5YW3XG4gKi9cbnZhciBib290ID0gcmVxdWlyZShcImJvb3RcIik7XG52YXIgYWNlRWRpdG9yID0ge307XG5cbmZ1bmN0aW9uIGluaXRBY2UoZWwsIGNhbGwpIHtcbiAgICBmdW5jdGlvbiBqdXN0SW5pdCgpIHtcbiAgICAgICAgdmFyIGxhbmdUb29scyA9IGFjZS5yZXF1aXJlKFwiYWNlL2V4dC9sYW5ndWFnZV90b29sc1wiKTtcbiAgICAgICAgdmFyIGVkaXRvciA9IGFjZS5lZGl0KGVsKTtcbiAgICAgICAgZWRpdG9yLnNldFRoZW1lKFwiYWNlL3RoZW1lL2VjbGlwc2VcIik7XG4gICAgICAgIGFjZUVkaXRvcltlbF0gPSB7fTtcblxuICAgICAgICBhY2VFZGl0b3JbZWxdLnNldFNjcmlwdCA9IGZ1bmN0aW9uIChzY3JpcHQpIHtcbiAgICAgICAgICAgIGlmIChzY3JpcHQpIHtcbiAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0VmFsdWUoc2NyaXB0LCAtMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYWNlRWRpdG9yW2VsXS5nZXRTY3JpcHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgYWNlRWRpdG9yW2VsXS5pbml0ID0gZnVuY3Rpb24gKGxhbmcsIHNjcmlwdCkge1xuICAgICAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKFwiYWNlL21vZGUvXCIgKyBsYW5nKTtcbiAgICAgICAgICAgIGVkaXRvci4kYmxvY2tTY3JvbGxpbmcgPSBJbmZpbml0eTtcbiAgICAgICAgICAgIGVkaXRvci5zZXRPcHRpb25zKHtcbiAgICAgICAgICAgICAgICBlbmFibGVCYXNpY0F1dG9jb21wbGV0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVuYWJsZVNuaXBwZXRzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVuYWJsZUxpdmVBdXRvY29tcGxldGlvbjogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlZGl0b3Iuc2V0VmFsdWUoc2NyaXB0LCAtMSk7XG4gICAgICAgIH1cbiAgICAgICAgYWNlRWRpdG9yW2VsXS5zZXRDb21wbGV0ZURhdGEgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgbGFuZ1Rvb2xzLmFkZENvbXBsZXRlcih7XG4gICAgICAgICAgICAgICAgZ2V0Q29tcGxldGlvbnM6IGZ1bmN0aW9uIChlZGl0b3IsIHNlc3Npb24sIHBvcywgcHJlZml4LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJlZml4Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhbGwoYWNlRWRpdG9yW2VsXSk7XG4gICAgfVxuXG4gICAgaWYgKCF3aW5kb3cuYWNlKSB7XG4gICAgICAgIGJvb3QuaW1wb3J0UGx1Z2luKFwicGx1Z2lucy9hY2UvYWNlLmpzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJvb3QuaW1wb3J0UGx1Z2luKFwicGx1Z2lucy9hY2UvZXh0LWxhbmd1YWdlX3Rvb2xzLmpzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBqdXN0SW5pdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGp1c3RJbml0KCk7XG4gICAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIC8qKlxuICAgICAqIOWIm+W7uuS4gOS4que8lui+keWZqFxuICAgICAqIEBwYXJhbSBpZCDnvJbovpHlmajlrrnlmahJRCDlpoI6IGVkaXRvclxuICAgICAqIEBwYXJhbSBjYmsg5Yib5bu65ZCO6LCD55So5Zue6LCDIOW5tuS8oOWFpee8lui+keWZqOWvueixoSzlj6/osIPnlKjmraTlr7nosaHnmoQgc2V0U2NyaXB0IGdldFNjcmlwdCBpbml0KGxhbmd1YWdlLHNjcmlwdCnnrYnov5vooYzmk43kvZxcbiAgICAgKi9cbiAgICBjcmVhdGVFZGl0b3I6IGZ1bmN0aW9uIChpZCwgY2JrKSB7XG4gICAgICAgIGlmICghYWNlRWRpdG9yW2lkXSkge1xuICAgICAgICAgICAgaW5pdEFjZShpZCwgY2JrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNiayhhY2VFZGl0b3JbaWRdKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy91dGlscy9zY3JpcHQtZWRpdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIDE0Il0sInNvdXJjZVJvb3QiOiIifQ==')}},[23]);